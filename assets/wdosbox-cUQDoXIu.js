import{g as Mo,a as To,p as Z,r as Co,b as Ro,B as vn}from"./index-TJuH7Fzt.js";function Po(Se,en){for(var De=0;De<en.length;De++){const Q=en[De];if(typeof Q!="string"&&!Array.isArray(Q)){for(const W in Q)if(W!=="default"&&!(W in Se)){const f=Object.getOwnPropertyDescriptor(Q,W);f&&Object.defineProperty(Se,W,f.get?f:{enumerable:!0,get:()=>Q[W]})}}}return Object.freeze(Object.defineProperty(Se,Symbol.toStringTag,{value:"Module"}))}var Vn={exports:{}},Oo=null;const Bo=Object.freeze(Object.defineProperty({__proto__:null,default:Oo},Symbol.toStringTag,{value:"Module"})),No=Mo(Bo);(function(Se,en){var De=function(){var Q=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(Q=Q||__filename),function(W){W=W||{};var f=typeof W<"u"?W:{},Le={},te;for(te in f)f.hasOwnProperty(te)&&(Le[te]=f[te]);var Ae=[],qe="./this.program",xe=function(e,n){throw n},Fe=!1,ne=!1,ce=!1,pn=!1,hn=!1;Fe=typeof window=="object",ne=typeof importScripts=="function",pn=typeof Z=="object"&&typeof Z.versions=="object"&&typeof Z.versions.node=="string",ce=pn&&!Fe&&!ne,hn=!Fe&&!ce&&!ne;var V="";function Jn(e){return f.locateFile?f.locateFile(e,V):V+e}var ye,gn,Me,nn,Ie,rn;ce?(V=__dirname+"/",ye=function(n,r){return Ie||(Ie=No),rn||(rn=Ro()),n=rn.normalize(n),Ie.readFileSync(n,r?null:"utf8")},Me=function(n){var r=ye(n,!0);return r.buffer||(r=new Uint8Array(r)),H(r.buffer),r},Z.argv.length>1&&(qe=Z.argv[1].replace(/\\/g,"/")),Ae=Z.argv.slice(2),Z.on("uncaughtException",function(e){if(!(e instanceof $e))throw e}),Z.on("unhandledRejection",M),xe=function(e){Z.exit(e)},f.inspect=function(){return"[Emscripten Module object]"}):hn?(typeof read<"u"&&(ye=function(n){return read(n)}),Me=function(n){var r;return typeof readbuffer=="function"?new Uint8Array(readbuffer(n)):(r=read(n,"binary"),H(typeof r=="object"),r)},typeof scriptArgs<"u"?Ae=scriptArgs:typeof arguments<"u"&&(Ae=arguments),typeof quit=="function"&&(xe=function(e){quit(e)}),typeof print<"u"&&(typeof console>"u"&&(console={}),console.log=print,console.warn=console.error=typeof printErr<"u"?printErr:print)):(Fe||ne)&&(ne?V=self.location.href:document.currentScript&&(V=document.currentScript.src),Q&&(V=Q),V.indexOf("blob:")!==0?V=V.substr(0,V.lastIndexOf("/")+1):V="",ye=function(n){var r=new XMLHttpRequest;return r.open("GET",n,!1),r.send(null),r.responseText},ne&&(Me=function(n){var r=new XMLHttpRequest;return r.open("GET",n,!1),r.responseType="arraybuffer",r.send(null),new Uint8Array(r.response)}),gn=function(n,r,t){var i=new XMLHttpRequest;i.open("GET",n,!0),i.responseType="arraybuffer",i.onload=function(){if(i.status==200||i.status==0&&i.response){r(i.response);return}t()},i.onerror=t,i.send(null)},nn=function(e){document.title=e});var Ue=f.print||console.log.bind(console),q=f.printErr||console.warn.bind(console);for(te in Le)Le.hasOwnProperty(te)&&(f[te]=Le[te]);Le=null,f.arguments&&(Ae=f.arguments),f.thisProgram&&(qe=f.thisProgram),f.quit&&(xe=f.quit);var Zn=16;function yn(e){var n=l[on>>2],r=n+e+15&-16;return r>Nn()&&M(),l[on>>2]=r,n}function _n(e,n){return n||(n=Zn),Math.ceil(e/n)*n}function Qn(e){switch(e){case"i1":case"i8":return 1;case"i16":return 2;case"i32":return 4;case"i64":return 8;case"float":return 4;case"double":return 8;default:{if(e[e.length-1]==="*")return 4;if(e[0]==="i"){var n=parseInt(e.substr(1));return H(n%8===0,"getNativeTypeSize invalid bits "+n+", type "+e),n/8}else return 0}}}function _e(e){_e.shown||(_e.shown={}),_e.shown[e]||(_e.shown[e]=1,q(e))}var Te;f.wasmBinary&&(Te=f.wasmBinary);var K;f.noExitRuntime&&(K=f.noExitRuntime),typeof WebAssembly!="object"&&q("no native wasm support detected");function $n(e,n,r,t){switch(r=r||"i8",r.charAt(r.length-1)==="*"&&(r="i32"),r){case"i1":b[e>>0]=n;break;case"i8":b[e>>0]=n;break;case"i16":G[e>>1]=n;break;case"i32":l[e>>2]=n;break;case"i64":N=[n>>>0,(D=n,+oe(D)>=1?D>0?(ue(+ae(D/4294967296),4294967295)|0)>>>0:~~+ie((D-+(~~D>>>0))/4294967296)>>>0:0)],l[e>>2]=N[0],l[e+4>>2]=N[1];break;case"float":re[e>>2]=n;break;case"double":je[e>>3]=n;break;default:M("invalid type for setValue: "+r)}}var le,er=new WebAssembly.Table({initial:1950,maximum:1950,element:"anyfunc"}),X=!1;function H(e,n){e||M("Assertion failed: "+n)}var Ce=0,nr=3;function Re(e,n,r,t){var i,a;typeof e=="number"?(i=!0,a=e):(i=!1,a=e.length);var s=typeof n=="string"?n:null,c;if(r==nr?c=t:c=[Y,ln,yn][r](Math.max(a,s?1:n.length)),i){var d;for(t=c,H((c&3)==0),d=c+(a&-4);t<d;t+=4)l[t>>2]=0;for(d=c+a;t<d;)b[t++>>0]=0;return c}if(s==="i8")return e.subarray||e.slice?I.set(e,c):I.set(new Uint8Array(e),c),c;for(var v=0,h,p,g;v<a;){var _=e[v];if(h=s||n[v],h===0){v++;continue}h=="i64"&&(h="i32"),$n(c+v,_,h),g!==h&&(p=Qn(h),g=h),v+=p}return c}function rr(e){return Fn?Y(e):yn(e)}var wn=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function we(e,n,r){for(var t=n+r,i=n;e[i]&&!(i>=t);)++i;if(i-n>16&&e.subarray&&wn)return wn.decode(e.subarray(n,i));for(var a="";n<i;){var s=e[n++];if(!(s&128)){a+=String.fromCharCode(s);continue}var c=e[n++]&63;if((s&224)==192){a+=String.fromCharCode((s&31)<<6|c);continue}var d=e[n++]&63;if((s&240)==224?s=(s&15)<<12|c<<6|d:s=(s&7)<<18|c<<12|d<<6|e[n++]&63,s<65536)a+=String.fromCharCode(s);else{var v=s-65536;a+=String.fromCharCode(55296|v>>10,56320|v&1023)}}return a}function U(e,n){return e?we(I,e,n):""}function Ye(e,n,r,t){if(!(t>0))return 0;for(var i=r,a=r+t-1,s=0;s<e.length;++s){var c=e.charCodeAt(s);if(c>=55296&&c<=57343){var d=e.charCodeAt(++s);c=65536+((c&1023)<<10)|d&1023}if(c<=127){if(r>=a)break;n[r++]=c}else if(c<=2047){if(r+1>=a)break;n[r++]=192|c>>6,n[r++]=128|c&63}else if(c<=65535){if(r+2>=a)break;n[r++]=224|c>>12,n[r++]=128|c>>6&63,n[r++]=128|c&63}else{if(r+3>=a)break;n[r++]=240|c>>18,n[r++]=128|c>>12&63,n[r++]=128|c>>6&63,n[r++]=128|c&63}}return n[r]=0,r-i}function de(e,n,r){return Ye(e,I,n,r)}function Ee(e){for(var n=0,r=0;r<e.length;++r){var t=e.charCodeAt(r);t>=55296&&t<=57343&&(t=65536+((t&1023)<<10)|e.charCodeAt(++r)&1023),t<=127?++n:t<=2047?n+=2:t<=65535?n+=3:n+=4}return n}var En=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0;function tr(e){for(var n=e,r=n>>1;G[r];)++r;if(n=r<<1,n-e>32&&En)return En.decode(I.subarray(e,n));for(var t=0,i="";;){var a=G[e+t*2>>1];if(a==0)return i;++t,i+=String.fromCharCode(a)}}function kn(e){var n=Ee(e)+1,r=ln(n);return Ye(e,b,r,n),r}function or(e,n){b.set(e,n)}function ir(e,n,r){for(var t=0;t<e.length;++t)b[n++>>0]=e.charCodeAt(t);r||(b[n>>0]=0)}var ar=65536;function bn(e,n){return e%n>0&&(e+=n-e%n),e}var Pe,b,I,G,tn,l,ke,re,je;function Sn(e){Pe=e,f.HEAP8=b=new Int8Array(e),f.HEAP16=G=new Int16Array(e),f.HEAP32=l=new Int32Array(e),f.HEAPU8=I=new Uint8Array(e),f.HEAPU16=tn=new Uint16Array(e),f.HEAPU32=ke=new Uint32Array(e),f.HEAPF32=re=new Float32Array(e),f.HEAPF64=je=new Float64Array(e)}var ur=31144528,on=30095792,Dn=f.TOTAL_MEMORY||67108864;f.wasmMemory?le=f.wasmMemory:le=new WebAssembly.Memory({initial:Dn/ar}),le&&(Pe=le.buffer),Dn=Pe.byteLength,Sn(Pe),l[on>>2]=ur;function He(e){for(;e.length>0;){var n=e.shift();if(typeof n=="function"){n();continue}var r=n.func;typeof r=="number"?n.arg===void 0?f.dynCall_v(r):f.dynCall_vi(r,n.arg):r(n.arg===void 0?null:n.arg)}}var Ln=[],An=[],sr=[],fr=[],xn=[],Fn=!1;function cr(){if(f.preRun)for(typeof f.preRun=="function"&&(f.preRun=[f.preRun]);f.preRun.length;)vr(f.preRun.shift());He(Ln)}function lr(){Fn=!0,!f.noFSInit&&!o.init.initialized&&o.init(),He(An)}function dr(){o.ignorePermissions=!1,He(sr)}function mr(){if(f.postRun)for(typeof f.postRun=="function"&&(f.postRun=[f.postRun]);f.postRun.length;)pr(f.postRun.shift());He(xn)}function vr(e){Ln.unshift(e)}function pr(e){xn.unshift(e)}var oe=Math.abs,ie=Math.ceil,ae=Math.floor,ue=Math.min,me=0,Oe=null;function qo(e){return e}function Ge(e){me++,f.monitorRunDependencies&&f.monitorRunDependencies(me)}function Be(e){if(me--,f.monitorRunDependencies&&f.monitorRunDependencies(me),me==0&&Oe){var n=Oe;Oe=null,n()}}f.preloadedImages={},f.preloadedAudios={};function M(e){throw f.onAbort&&f.onAbort(e),e+="",Ue(e),q(e),X=!0,e="abort("+e+"). Build with -s ASSERTIONS=1 for more info.",new WebAssembly.RuntimeError(e)}var Mn="data:application/octet-stream;base64,";function Tn(e){return String.prototype.startsWith?e.startsWith(Mn):e.indexOf(Mn)===0}var se="wdosbox.wasm";Tn(se)||(se=Jn(se));function Cn(){try{if(Te)return new Uint8Array(Te);if(Me)return Me(se);throw"both async and sync fetching of the wasm failed"}catch(e){M(e)}}function hr(){return!Te&&(Fe||ne)&&typeof fetch=="function"?fetch(se,{credentials:"same-origin"}).then(function(e){if(!e.ok)throw"failed to load wasm binary file at '"+se+"'";return e.arrayBuffer()}).catch(function(){return Cn()}):new Promise(function(e,n){e(Cn())})}function gr(){var e={env:jn,wasi_unstable:jn};function n(s,c){var d=s.exports;d=A.instrumentWasmExports(d),f.asm=d,Be()}Ge();function r(s){n(s.instance)}function t(s){return hr().then(function(c){return WebAssembly.instantiate(c,e)}).then(s,function(c){q("failed to asynchronously prepare wasm: "+c),M(c)})}function i(){if(!Te&&typeof WebAssembly.instantiateStreaming=="function"&&!Tn(se)&&typeof fetch=="function")fetch(se,{credentials:"same-origin"}).then(function(s){var c=WebAssembly.instantiateStreaming(s,e);return c.then(r,function(d){q("wasm streaming compile failed: "+d),q("falling back to ArrayBuffer instantiation"),t(r)})});else return t(r)}if(f.instantiateWasm)try{var a=f.instantiateWasm(e,n);return a=A.instrumentWasmExports(a),a}catch(s){return q("Module.instantiateWasm callback failed with error: "+s),!1}return i(),{}}var D,N,yr={1618:function(){f.sync_id=Date.now(),f.sync_sleep=function(e){if(f.sync_wakeUp)throw new Error("Trying to sleep in sleeping state!");f.sync_wakeUp=e,window.postMessage({type:"sync_sleep_message",id:f.sync_id},"*")},f.receive=function(e){if(e.source===window&&(e.data,e.data.type==="sync_sleep_message"&&f.sync_id==e.data.id)){e.stopPropagation();var n=f.sync_wakeUp;delete f.sync_wakeUp,n()}},window.addEventListener("message",f.receive,!0)},2215:function(){window.removeEventListener("message",f.receive),delete f.sync_sleep},2302:function(){return A.state===0?1:0},2343:function(){return f.heapOperation!==void 0?(f.heapOperation(),1):0},10098:function(){u&&u.audio&&u.audio.queueNewAudioData&&u.audio.queueNewAudioData()},90029:function(){f.SDL=u,f.canvas.addEventListener("touchstart",function(n){},!0),f.canvas.addEventListener("touchmove",function(n){n.preventDefault()},!0);var e=function(n){u&&u.audioContext&&u.audioContext.state&&u.audioContext.state!=="running"&&u.audioContext.resume()};window.addEventListener("touchstart",e,!0),window.addEventListener("mousedown",e,!0)},90548:function(){f.send=function(e,n,r){r||(r=function(){}),n||(n="");var t=e+"_callback_"+Math.random(),i=f.lengthBytesUTF8(e)+1,a=f.lengthBytesUTF8(t)+1,s=f.lengthBytesUTF8(n)+1,c=f._malloc(a),d=f._malloc(i),v=f._malloc(s);f.stringToUTF8(e,d,i),f.stringToUTF8(t,c,a),f.stringToUTF8(n,v,s),f[t]=r,f.__send(d,v,c),f._free(d),f._free(c),f._free(v)}},91381:function(e){const n=U(e);f.ping(n)},91444:function(){return navigator.userAgent.toLowerCase().indexOf("firefox")>-1?0:1},91563:function(){if(!f.screenshot_callback_name)return;const e=f.screenshot_callback_name,n=f.canvas.toDataURL("image/png"),r=f[e];delete f[e],delete f.screenshot_callback_name,r(n)},91880:function(e,n){f.ping("shell_input",e,n)},91928:function(e,n){const r=U(e,n);f.ping("write_stdout",r)},92008:function(e,n){var r=U(e),t=U(n);t.length>0&&(t=t.slice(0,-1));var i=JSON.parse("{"+t+"}");r in f&&(f[r](i),delete f[r])},92334:function(e){const n=U(e);f.screenshot_callback_name=n},92426:function(e){const n=f.version;let r=f.lengthBytesUTF8(n)+1;r>256&&(r=256),f.stringToUTF8(n,e,r)},94327:function(){f.screenIsReadOnly=!0;var e=f.canvas.style;e.imageRendering="optimizeSpeed",e.imageRendering="-moz-crisp-edges",e.imageRendering="-o-crisp-edges",e.imageRendering="-webkit-optimize-contrast",e.imageRendering="optimize-contrast",e.imageRendering="crisp-edges",e.imageRendering="pixelated"}},_r=[];function wr(e,n){var r=_r;for(r.length=0;;){var t=I[e++];if(!t)return r;t===100||t===102?(n=_n(n,8),r.push(je[n>>3]),n+=8):t===105&&(n=_n(n,4),r.push(l[n>>2]),n+=4)}}function Er(e,n,r){var t=wr(n,r);return yr[e].apply(null,t)}function kr(){if(!f.sync_sleep)throw new Error("Async environment does not exists");return A.handleSleep(function(e){f.sync_sleep(e)})}An.push({func:function(){Do()}});function Io(e){return e}function br(e){var n=/\b_Z[\w\d_]+/g;return e.replace(n,function(r){var t=r;return r===t?r:t+" ["+r+"]"})}function Sr(){var e=new Error;if(!e.stack){try{throw new Error(0)}catch(n){e=n}if(!e.stack)return"(no stack trace available)"}return e.stack.toString()}function Dr(){var e=Sr();return f.extraStackTrace&&(e+=`
`+f.extraStackTrace()),br(e)}function ve(e){return f.___errno_location&&(l[f.___errno_location()>>2]=e),e}var C={splitPath:function(e){var n=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return n.exec(e).slice(1)},normalizeArray:function(e,n){for(var r=0,t=e.length-1;t>=0;t--){var i=e[t];i==="."?e.splice(t,1):i===".."?(e.splice(t,1),r++):r&&(e.splice(t,1),r--)}if(n)for(;r;r--)e.unshift("..");return e},normalize:function(e){var n=e.charAt(0)==="/",r=e.substr(-1)==="/";return e=C.normalizeArray(e.split("/").filter(function(t){return!!t}),!n).join("/"),!e&&!n&&(e="."),e&&r&&(e+="/"),(n?"/":"")+e},dirname:function(e){var n=C.splitPath(e),r=n[0],t=n[1];return!r&&!t?".":(t&&(t=t.substr(0,t.length-1)),r+t)},basename:function(e){if(e==="/")return"/";var n=e.lastIndexOf("/");return n===-1?e:e.substr(n+1)},extname:function(e){return C.splitPath(e)[3]},join:function(){var e=Array.prototype.slice.call(arguments,0);return C.normalize(e.join("/"))},join2:function(e,n){return C.normalize(e+"/"+n)}},$={resolve:function(){for(var e="",n=!1,r=arguments.length-1;r>=-1&&!n;r--){var t=r>=0?arguments[r]:o.cwd();if(typeof t!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!t)return"";e=t+"/"+e,n=t.charAt(0)==="/"}return e=C.normalizeArray(e.split("/").filter(function(i){return!!i}),!n).join("/"),(n?"/":"")+e||"."},relative:function(e,n){e=$.resolve(e).substr(1),n=$.resolve(n).substr(1);function r(v){for(var h=0;h<v.length&&v[h]==="";h++);for(var p=v.length-1;p>=0&&v[p]==="";p--);return h>p?[]:v.slice(h,p-h+1)}for(var t=r(e.split("/")),i=r(n.split("/")),a=Math.min(t.length,i.length),s=a,c=0;c<a;c++)if(t[c]!==i[c]){s=c;break}for(var d=[],c=s;c<t.length;c++)d.push("..");return d=d.concat(i.slice(s)),d.join("/")}},pe={ttys:[],init:function(){},shutdown:function(){},register:function(e,n){pe.ttys[e]={input:[],output:[],ops:n},o.registerDevice(e,pe.stream_ops)},stream_ops:{open:function(e){var n=pe.ttys[e.node.rdev];if(!n)throw new o.ErrnoError(43);e.tty=n,e.seekable=!1},close:function(e){e.tty.ops.flush(e.tty)},flush:function(e){e.tty.ops.flush(e.tty)},read:function(e,n,r,t,i){if(!e.tty||!e.tty.ops.get_char)throw new o.ErrnoError(60);for(var a=0,s=0;s<t;s++){var c;try{c=e.tty.ops.get_char(e.tty)}catch{throw new o.ErrnoError(29)}if(c===void 0&&a===0)throw new o.ErrnoError(6);if(c==null)break;a++,n[r+s]=c}return a&&(e.node.timestamp=Date.now()),a},write:function(e,n,r,t,i){if(!e.tty||!e.tty.ops.put_char)throw new o.ErrnoError(60);try{for(var a=0;a<t;a++)e.tty.ops.put_char(e.tty,n[r+a])}catch{throw new o.ErrnoError(29)}return t&&(e.node.timestamp=Date.now()),a}},default_tty_ops:{get_char:function(e){if(!e.input.length){var n=null;if(ce){var r=256,t=vn.alloc?vn.alloc(r):new vn(r),i=0;try{i=Ie.readSync(Z.stdin.fd,t,0,r,null)}catch(a){if(a.toString().indexOf("EOF")!=-1)i=0;else throw a}i>0?n=t.slice(0,i).toString("utf-8"):n=null}else typeof window<"u"&&typeof window.prompt=="function"?(n=window.prompt("Input: "),n!==null&&(n+=`
`)):typeof readline=="function"&&(n=readline(),n!==null&&(n+=`
`));if(!n)return null;e.input=ee(n,!0)}return e.input.shift()},put_char:function(e,n){n===null||n===10?(Ue(we(e.output,0)),e.output=[]):n!=0&&e.output.push(n)},flush:function(e){e.output&&e.output.length>0&&(Ue(we(e.output,0)),e.output=[])}},default_tty1_ops:{put_char:function(e,n){n===null||n===10?(q(we(e.output,0)),e.output=[]):n!=0&&e.output.push(n)},flush:function(e){e.output&&e.output.length>0&&(q(we(e.output,0)),e.output=[])}}},L={ops_table:null,mount:function(e){return L.createNode(null,"/",16895,0)},createNode:function(e,n,r,t){if(o.isBlkdev(r)||o.isFIFO(r))throw new o.ErrnoError(63);L.ops_table||(L.ops_table={dir:{node:{getattr:L.node_ops.getattr,setattr:L.node_ops.setattr,lookup:L.node_ops.lookup,mknod:L.node_ops.mknod,rename:L.node_ops.rename,unlink:L.node_ops.unlink,rmdir:L.node_ops.rmdir,readdir:L.node_ops.readdir,symlink:L.node_ops.symlink},stream:{llseek:L.stream_ops.llseek}},file:{node:{getattr:L.node_ops.getattr,setattr:L.node_ops.setattr},stream:{llseek:L.stream_ops.llseek,read:L.stream_ops.read,write:L.stream_ops.write,allocate:L.stream_ops.allocate,mmap:L.stream_ops.mmap,msync:L.stream_ops.msync}},link:{node:{getattr:L.node_ops.getattr,setattr:L.node_ops.setattr,readlink:L.node_ops.readlink},stream:{}},chrdev:{node:{getattr:L.node_ops.getattr,setattr:L.node_ops.setattr},stream:o.chrdev_stream_ops}});var i=o.createNode(e,n,r,t);return o.isDir(i.mode)?(i.node_ops=L.ops_table.dir.node,i.stream_ops=L.ops_table.dir.stream,i.contents={}):o.isFile(i.mode)?(i.node_ops=L.ops_table.file.node,i.stream_ops=L.ops_table.file.stream,i.usedBytes=0,i.contents=null):o.isLink(i.mode)?(i.node_ops=L.ops_table.link.node,i.stream_ops=L.ops_table.link.stream):o.isChrdev(i.mode)&&(i.node_ops=L.ops_table.chrdev.node,i.stream_ops=L.ops_table.chrdev.stream),i.timestamp=Date.now(),e&&(e.contents[n]=i),i},getFileDataAsRegularArray:function(e){if(e.contents&&e.contents.subarray){for(var n=[],r=0;r<e.usedBytes;++r)n.push(e.contents[r]);return n}return e.contents},getFileDataAsTypedArray:function(e){return e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array},expandFileStorage:function(e,n){var r=e.contents?e.contents.length:0;if(!(r>=n)){var t=1024*1024;n=Math.max(n,r*(r<t?2:1.125)|0),r!=0&&(n=Math.max(n,256));var i=e.contents;e.contents=new Uint8Array(n),e.usedBytes>0&&e.contents.set(i.subarray(0,e.usedBytes),0)}},resizeFileStorage:function(e,n){if(e.usedBytes!=n){if(n==0){e.contents=null,e.usedBytes=0;return}if(!e.contents||e.contents.subarray){var r=e.contents;e.contents=new Uint8Array(new ArrayBuffer(n)),r&&e.contents.set(r.subarray(0,Math.min(n,e.usedBytes))),e.usedBytes=n;return}if(e.contents||(e.contents=[]),e.contents.length>n)e.contents.length=n;else for(;e.contents.length<n;)e.contents.push(0);e.usedBytes=n}},node_ops:{getattr:function(e){var n={};return n.dev=o.isChrdev(e.mode)?e.id:1,n.ino=e.id,n.mode=e.mode,n.nlink=1,n.uid=0,n.gid=0,n.rdev=e.rdev,o.isDir(e.mode)?n.size=4096:o.isFile(e.mode)?n.size=e.usedBytes:o.isLink(e.mode)?n.size=e.link.length:n.size=0,n.atime=new Date(e.timestamp),n.mtime=new Date(e.timestamp),n.ctime=new Date(e.timestamp),n.blksize=4096,n.blocks=Math.ceil(n.size/n.blksize),n},setattr:function(e,n){n.mode!==void 0&&(e.mode=n.mode),n.timestamp!==void 0&&(e.timestamp=n.timestamp),n.size!==void 0&&L.resizeFileStorage(e,n.size)},lookup:function(e,n){throw o.genericErrors[44]},mknod:function(e,n,r,t){return L.createNode(e,n,r,t)},rename:function(e,n,r){if(o.isDir(e.mode)){var t;try{t=o.lookupNode(n,r)}catch{}if(t)for(var i in t.contents)throw new o.ErrnoError(55)}delete e.parent.contents[e.name],e.name=r,n.contents[r]=e,e.parent=n},unlink:function(e,n){delete e.contents[n]},rmdir:function(e,n){var r=o.lookupNode(e,n);for(var t in r.contents)throw new o.ErrnoError(55);delete e.contents[n]},readdir:function(e){var n=[".",".."];for(var r in e.contents)e.contents.hasOwnProperty(r)&&n.push(r);return n},symlink:function(e,n,r){var t=L.createNode(e,n,41471,0);return t.link=r,t},readlink:function(e){if(!o.isLink(e.mode))throw new o.ErrnoError(28);return e.link}},stream_ops:{read:function(e,n,r,t,i){var a=e.node.contents;if(i>=e.node.usedBytes)return 0;var s=Math.min(e.node.usedBytes-i,t);if(s>8&&a.subarray)n.set(a.subarray(i,i+s),r);else for(var c=0;c<s;c++)n[r+c]=a[i+c];return s},write:function(e,n,r,t,i,a){if(n.buffer===b.buffer&&(a=!1),!t)return 0;var s=e.node;if(s.timestamp=Date.now(),n.subarray&&(!s.contents||s.contents.subarray)){if(a)return s.contents=n.subarray(r,r+t),s.usedBytes=t,t;if(s.usedBytes===0&&i===0)return s.contents=new Uint8Array(n.subarray(r,r+t)),s.usedBytes=t,t;if(i+t<=s.usedBytes)return s.contents.set(n.subarray(r,r+t),i),t}if(L.expandFileStorage(s,i+t),s.contents.subarray&&n.subarray)s.contents.set(n.subarray(r,r+t),i);else for(var c=0;c<t;c++)s.contents[i+c]=n[r+c];return s.usedBytes=Math.max(s.usedBytes,i+t),t},llseek:function(e,n,r){var t=n;if(r===1?t+=e.position:r===2&&o.isFile(e.node.mode)&&(t+=e.node.usedBytes),t<0)throw new o.ErrnoError(28);return t},allocate:function(e,n,r){L.expandFileStorage(e.node,n+r),e.node.usedBytes=Math.max(e.node.usedBytes,n+r)},mmap:function(e,n,r,t,i,a,s){if(!o.isFile(e.node.mode))throw new o.ErrnoError(43);var c,d,v=e.node.contents;if(!(s&2)&&v.buffer===n.buffer)d=!1,c=v.byteOffset;else{(i>0||i+t<e.node.usedBytes)&&(v.subarray?v=v.subarray(i,i+t):v=Array.prototype.slice.call(v,i,i+t)),d=!0;var h=n.buffer==b.buffer;if(c=Y(t),!c)throw new o.ErrnoError(48);(h?b:n).set(v,c)}return{ptr:c,allocated:d}},msync:function(e,n,r,t,i){if(!o.isFile(e.node.mode))throw new o.ErrnoError(43);return i&2||L.stream_ops.write(e,n,0,t,r,!1),0}}},z={dbs:{},indexedDB:function(){if(typeof indexedDB<"u")return indexedDB;var e=null;return typeof window=="object"&&(e=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB),H(e,"IDBFS used, but indexedDB not supported"),e},DB_VERSION:21,DB_STORE_NAME:"FILE_DATA",mount:function(e){return L.mount.apply(null,arguments)},syncfs:function(e,n,r){z.getLocalSet(e,function(t,i){if(t)return r(t);z.getRemoteSet(e,function(a,s){if(a)return r(a);var c=n?s:i,d=n?i:s;z.reconcile(c,d,r)})})},getDB:function(e,n){var r=z.dbs[e];if(r)return n(null,r);var t;try{t=z.indexedDB().open(e,z.DB_VERSION)}catch(i){return n(i)}if(!t)return n("Unable to connect to IndexedDB");t.onupgradeneeded=function(i){var a=i.target.result,s=i.target.transaction,c;a.objectStoreNames.contains(z.DB_STORE_NAME)?c=s.objectStore(z.DB_STORE_NAME):c=a.createObjectStore(z.DB_STORE_NAME),c.indexNames.contains("timestamp")||c.createIndex("timestamp","timestamp",{unique:!1})},t.onsuccess=function(){r=t.result,z.dbs[e]=r,n(null,r)},t.onerror=function(i){n(this.error),i.preventDefault()}},getLocalSet:function(e,n){var r={};function t(d){return d!=="."&&d!==".."}function i(d){return function(v){return C.join2(d,v)}}for(var a=o.readdir(e.mountpoint).filter(t).map(i(e.mountpoint));a.length;){var s=a.pop(),c;try{c=o.stat(s)}catch(d){return n(d)}o.isDir(c.mode)&&a.push.apply(a,o.readdir(s).filter(t).map(i(s))),r[s]={timestamp:c.mtime}}return n(null,{type:"local",entries:r})},getRemoteSet:function(e,n){var r={};z.getDB(e.mountpoint,function(t,i){if(t)return n(t);try{var a=i.transaction([z.DB_STORE_NAME],"readonly");a.onerror=function(d){n(this.error),d.preventDefault()};var s=a.objectStore(z.DB_STORE_NAME),c=s.index("timestamp");c.openKeyCursor().onsuccess=function(d){var v=d.target.result;if(!v)return n(null,{type:"remote",db:i,entries:r});r[v.primaryKey]={timestamp:v.key},v.continue()}}catch(d){return n(d)}})},loadLocalEntry:function(e,n){var r,t;try{var i=o.lookupPath(e);t=i.node,r=o.stat(e)}catch(a){return n(a)}return o.isDir(r.mode)?n(null,{timestamp:r.mtime,mode:r.mode}):o.isFile(r.mode)?(t.contents=L.getFileDataAsTypedArray(t),n(null,{timestamp:r.mtime,mode:r.mode,contents:t.contents})):n(new Error("node type not supported"))},storeLocalEntry:function(e,n,r){try{if(o.isDir(n.mode))o.mkdir(e,n.mode);else if(o.isFile(n.mode))o.writeFile(e,n.contents,{canOwn:!0});else return r(new Error("node type not supported"));o.chmod(e,n.mode),o.utime(e,n.timestamp,n.timestamp)}catch(t){return r(t)}r(null)},removeLocalEntry:function(e,n){try{var r=o.lookupPath(e),t=o.stat(e);o.isDir(t.mode)?o.rmdir(e):o.isFile(t.mode)&&o.unlink(e)}catch(i){return n(i)}n(null)},loadRemoteEntry:function(e,n,r){var t=e.get(n);t.onsuccess=function(i){r(null,i.target.result)},t.onerror=function(i){r(this.error),i.preventDefault()}},storeRemoteEntry:function(e,n,r,t){var i=e.put(r,n);i.onsuccess=function(){t(null)},i.onerror=function(a){t(this.error),a.preventDefault()}},removeRemoteEntry:function(e,n,r){var t=e.delete(n);t.onsuccess=function(){r(null)},t.onerror=function(i){r(this.error),i.preventDefault()}},reconcile:function(e,n,r){var t=0,i=[];Object.keys(e.entries).forEach(function(p){var g=e.entries[p],_=n.entries[p];(!_||g.timestamp>_.timestamp)&&(i.push(p),t++)});var a=[];if(Object.keys(n.entries).forEach(function(p){n.entries[p];var g=e.entries[p];g||(a.push(p),t++)}),!t)return r(null);var s=!1,c=e.type==="remote"?e.db:n.db,d=c.transaction([z.DB_STORE_NAME],"readwrite"),v=d.objectStore(z.DB_STORE_NAME);function h(p){if(p&&!s)return s=!0,r(p)}d.onerror=function(p){h(this.error),p.preventDefault()},d.oncomplete=function(p){s||r(null)},i.sort().forEach(function(p){n.type==="local"?z.loadRemoteEntry(v,p,function(g,_){if(g)return h(g);z.storeLocalEntry(p,_,h)}):z.loadLocalEntry(p,function(g,_){if(g)return h(g);z.storeRemoteEntry(v,p,_,h)})}),a.sort().reverse().forEach(function(p){n.type==="local"?z.removeLocalEntry(p,h):z.removeRemoteEntry(v,p,h)})}},o={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,trackingDelegate:{},tracking:{openFlags:{READ:1,WRITE:2}},ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,handleFSError:function(e){if(!(e instanceof o.ErrnoError))throw e+" : "+Dr();return ve(e.errno)},lookupPath:function(e,n){if(e=$.resolve(o.cwd(),e),n=n||{},!e)return{path:"",node:null};var r={follow_mount:!0,recurse_count:0};for(var t in r)n[t]===void 0&&(n[t]=r[t]);if(n.recurse_count>8)throw new o.ErrnoError(32);for(var i=C.normalizeArray(e.split("/").filter(function(g){return!!g}),!1),a=o.root,s="/",c=0;c<i.length;c++){var d=c===i.length-1;if(d&&n.parent)break;if(a=o.lookupNode(a,i[c]),s=C.join2(s,i[c]),o.isMountpoint(a)&&(!d||d&&n.follow_mount)&&(a=a.mounted.root),!d||n.follow)for(var v=0;o.isLink(a.mode);){var h=o.readlink(s);s=$.resolve(C.dirname(s),h);var p=o.lookupPath(s,{recurse_count:n.recurse_count});if(a=p.node,v++>40)throw new o.ErrnoError(32)}}return{path:s,node:a}},getPath:function(e){for(var n;;){if(o.isRoot(e)){var r=e.mount.mountpoint;return n?r[r.length-1]!=="/"?r+"/"+n:r+n:r}n=n?e.name+"/"+n:e.name,e=e.parent}},hashName:function(e,n){for(var r=0,t=0;t<n.length;t++)r=(r<<5)-r+n.charCodeAt(t)|0;return(e+r>>>0)%o.nameTable.length},hashAddNode:function(e){var n=o.hashName(e.parent.id,e.name);e.name_next=o.nameTable[n],o.nameTable[n]=e},hashRemoveNode:function(e){var n=o.hashName(e.parent.id,e.name);if(o.nameTable[n]===e)o.nameTable[n]=e.name_next;else for(var r=o.nameTable[n];r;){if(r.name_next===e){r.name_next=e.name_next;break}r=r.name_next}},lookupNode:function(e,n){var r=o.mayLookup(e);if(r)throw new o.ErrnoError(r,e);for(var t=o.hashName(e.id,n),i=o.nameTable[t];i;i=i.name_next){var a=i.name;if(i.parent.id===e.id&&a===n)return i}return o.lookup(e,n)},createNode:function(e,n,r,t){if(!o.FSNode){o.FSNode=function(c,d,v,h){c||(c=this),this.parent=c,this.mount=c.mount,this.mounted=null,this.id=o.nextInode++,this.name=d,this.mode=v,this.node_ops={},this.stream_ops={},this.rdev=h},o.FSNode.prototype={};var i=365,a=146;Object.defineProperties(o.FSNode.prototype,{read:{get:function(){return(this.mode&i)===i},set:function(c){c?this.mode|=i:this.mode&=~i}},write:{get:function(){return(this.mode&a)===a},set:function(c){c?this.mode|=a:this.mode&=~a}},isFolder:{get:function(){return o.isDir(this.mode)}},isDevice:{get:function(){return o.isChrdev(this.mode)}}})}var s=new o.FSNode(e,n,r,t);return o.hashAddNode(s),s},destroyNode:function(e){o.hashRemoveNode(e)},isRoot:function(e){return e===e.parent},isMountpoint:function(e){return!!e.mounted},isFile:function(e){return(e&61440)===32768},isDir:function(e){return(e&61440)===16384},isLink:function(e){return(e&61440)===40960},isChrdev:function(e){return(e&61440)===8192},isBlkdev:function(e){return(e&61440)===24576},isFIFO:function(e){return(e&61440)===4096},isSocket:function(e){return(e&49152)===49152},flagModes:{r:0,rs:1052672,"r+":2,w:577,wx:705,xw:705,"w+":578,"wx+":706,"xw+":706,a:1089,ax:1217,xa:1217,"a+":1090,"ax+":1218,"xa+":1218},modeStringToFlags:function(e){var n=o.flagModes[e];if(typeof n>"u")throw new Error("Unknown file open mode: "+e);return n},flagsToPermissionString:function(e){var n=["r","w","rw"][e&3];return e&512&&(n+="w"),n},nodePermissions:function(e,n){return o.ignorePermissions?0:n.indexOf("r")!==-1&&!(e.mode&292)||n.indexOf("w")!==-1&&!(e.mode&146)||n.indexOf("x")!==-1&&!(e.mode&73)?2:0},mayLookup:function(e){var n=o.nodePermissions(e,"x");return n||(e.node_ops.lookup?0:2)},mayCreate:function(e,n){try{var r=o.lookupNode(e,n);return 20}catch{}return o.nodePermissions(e,"wx")},mayDelete:function(e,n,r){var t;try{t=o.lookupNode(e,n)}catch(a){return a.errno}var i=o.nodePermissions(e,"wx");if(i)return i;if(r){if(!o.isDir(t.mode))return 54;if(o.isRoot(t)||o.getPath(t)===o.cwd())return 10}else if(o.isDir(t.mode))return 31;return 0},mayOpen:function(e,n){return e?o.isLink(e.mode)?32:o.isDir(e.mode)&&(o.flagsToPermissionString(n)!=="r"||n&512)?31:o.nodePermissions(e,o.flagsToPermissionString(n)):44},MAX_OPEN_FDS:4096,nextfd:function(e,n){e=e||0,n=n||o.MAX_OPEN_FDS;for(var r=e;r<=n;r++)if(!o.streams[r])return r;throw new o.ErrnoError(33)},getStream:function(e){return o.streams[e]},createStream:function(e,n,r){o.FSStream||(o.FSStream=function(){},o.FSStream.prototype={},Object.defineProperties(o.FSStream.prototype,{object:{get:function(){return this.node},set:function(s){this.node=s}},isRead:{get:function(){return(this.flags&2097155)!==1}},isWrite:{get:function(){return(this.flags&2097155)!==0}},isAppend:{get:function(){return this.flags&1024}}}));var t=new o.FSStream;for(var i in e)t[i]=e[i];e=t;var a=o.nextfd(n,r);return e.fd=a,o.streams[a]=e,e},closeStream:function(e){o.streams[e]=null},chrdev_stream_ops:{open:function(e){var n=o.getDevice(e.node.rdev);e.stream_ops=n.stream_ops,e.stream_ops.open&&e.stream_ops.open(e)},llseek:function(){throw new o.ErrnoError(70)}},major:function(e){return e>>8},minor:function(e){return e&255},makedev:function(e,n){return e<<8|n},registerDevice:function(e,n){o.devices[e]={stream_ops:n}},getDevice:function(e){return o.devices[e]},getMounts:function(e){for(var n=[],r=[e];r.length;){var t=r.pop();n.push(t),r.push.apply(r,t.mounts)}return n},syncfs:function(e,n){typeof e=="function"&&(n=e,e=!1),o.syncFSRequests++,o.syncFSRequests>1&&console.log("warning: "+o.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var r=o.getMounts(o.root.mount),t=0;function i(s){return o.syncFSRequests--,n(s)}function a(s){if(s)return a.errored?void 0:(a.errored=!0,i(s));++t>=r.length&&i(null)}r.forEach(function(s){if(!s.type.syncfs)return a(null);s.type.syncfs(s,e,a)})},mount:function(e,n,r){var t=r==="/",i=!r,a;if(t&&o.root)throw new o.ErrnoError(10);if(!t&&!i){var s=o.lookupPath(r,{follow_mount:!1});if(r=s.path,a=s.node,o.isMountpoint(a))throw new o.ErrnoError(10);if(!o.isDir(a.mode))throw new o.ErrnoError(54)}var c={type:e,opts:n,mountpoint:r,mounts:[]},d=e.mount(c);return d.mount=c,c.root=d,t?o.root=d:a&&(a.mounted=c,a.mount&&a.mount.mounts.push(c)),d},unmount:function(e){var n=o.lookupPath(e,{follow_mount:!1});if(!o.isMountpoint(n.node))throw new o.ErrnoError(28);var r=n.node,t=r.mounted,i=o.getMounts(t);Object.keys(o.nameTable).forEach(function(s){for(var c=o.nameTable[s];c;){var d=c.name_next;i.indexOf(c.mount)!==-1&&o.destroyNode(c),c=d}}),r.mounted=null;var a=r.mount.mounts.indexOf(t);r.mount.mounts.splice(a,1)},lookup:function(e,n){return e.node_ops.lookup(e,n)},mknod:function(e,n,r){var t=o.lookupPath(e,{parent:!0}),i=t.node,a=C.basename(e);if(!a||a==="."||a==="..")throw new o.ErrnoError(28);var s=o.mayCreate(i,a);if(s)throw new o.ErrnoError(s);if(!i.node_ops.mknod)throw new o.ErrnoError(63);return i.node_ops.mknod(i,a,n,r)},create:function(e,n){return n=n!==void 0?n:438,n&=4095,n|=32768,o.mknod(e,n,0)},mkdir:function(e,n){return n=n!==void 0?n:511,n&=1023,n|=16384,o.mknod(e,n,0)},mkdirTree:function(e,n){for(var r=e.split("/"),t="",i=0;i<r.length;++i)if(r[i]){t+="/"+r[i];try{o.mkdir(t,n)}catch(a){if(a.errno!=20)throw a}}},mkdev:function(e,n,r){return typeof r>"u"&&(r=n,n=438),n|=8192,o.mknod(e,n,r)},symlink:function(e,n){if(!$.resolve(e))throw new o.ErrnoError(44);var r=o.lookupPath(n,{parent:!0}),t=r.node;if(!t)throw new o.ErrnoError(44);var i=C.basename(n),a=o.mayCreate(t,i);if(a)throw new o.ErrnoError(a);if(!t.node_ops.symlink)throw new o.ErrnoError(63);return t.node_ops.symlink(t,i,e)},rename:function(e,n){var r=C.dirname(e),t=C.dirname(n),i=C.basename(e),a=C.basename(n),s,c,d;try{s=o.lookupPath(e,{parent:!0}),c=s.node,s=o.lookupPath(n,{parent:!0}),d=s.node}catch{throw new o.ErrnoError(10)}if(!c||!d)throw new o.ErrnoError(44);if(c.mount!==d.mount)throw new o.ErrnoError(75);var v=o.lookupNode(c,i),h=$.relative(e,t);if(h.charAt(0)!==".")throw new o.ErrnoError(28);if(h=$.relative(n,r),h.charAt(0)!==".")throw new o.ErrnoError(55);var p;try{p=o.lookupNode(d,a)}catch{}if(v!==p){var g=o.isDir(v.mode),_=o.mayDelete(c,i,g);if(_)throw new o.ErrnoError(_);if(_=p?o.mayDelete(d,a,g):o.mayCreate(d,a),_)throw new o.ErrnoError(_);if(!c.node_ops.rename)throw new o.ErrnoError(63);if(o.isMountpoint(v)||p&&o.isMountpoint(p))throw new o.ErrnoError(10);if(d!==c&&(_=o.nodePermissions(c,"w"),_))throw new o.ErrnoError(_);try{o.trackingDelegate.willMovePath&&o.trackingDelegate.willMovePath(e,n)}catch(k){console.log("FS.trackingDelegate['willMovePath']('"+e+"', '"+n+"') threw an exception: "+k.message)}o.hashRemoveNode(v);try{c.node_ops.rename(v,d,a)}catch(k){throw k}finally{o.hashAddNode(v)}try{o.trackingDelegate.onMovePath&&o.trackingDelegate.onMovePath(e,n)}catch(k){console.log("FS.trackingDelegate['onMovePath']('"+e+"', '"+n+"') threw an exception: "+k.message)}}},rmdir:function(e){var n=o.lookupPath(e,{parent:!0}),r=n.node,t=C.basename(e),i=o.lookupNode(r,t),a=o.mayDelete(r,t,!0);if(a)throw new o.ErrnoError(a);if(!r.node_ops.rmdir)throw new o.ErrnoError(63);if(o.isMountpoint(i))throw new o.ErrnoError(10);try{o.trackingDelegate.willDeletePath&&o.trackingDelegate.willDeletePath(e)}catch(s){console.log("FS.trackingDelegate['willDeletePath']('"+e+"') threw an exception: "+s.message)}r.node_ops.rmdir(r,t),o.destroyNode(i);try{o.trackingDelegate.onDeletePath&&o.trackingDelegate.onDeletePath(e)}catch(s){console.log("FS.trackingDelegate['onDeletePath']('"+e+"') threw an exception: "+s.message)}},readdir:function(e){var n=o.lookupPath(e,{follow:!0}),r=n.node;if(!r.node_ops.readdir)throw new o.ErrnoError(54);return r.node_ops.readdir(r)},unlink:function(e){var n=o.lookupPath(e,{parent:!0}),r=n.node,t=C.basename(e),i=o.lookupNode(r,t),a=o.mayDelete(r,t,!1);if(a)throw new o.ErrnoError(a);if(!r.node_ops.unlink)throw new o.ErrnoError(63);if(o.isMountpoint(i))throw new o.ErrnoError(10);try{o.trackingDelegate.willDeletePath&&o.trackingDelegate.willDeletePath(e)}catch(s){console.log("FS.trackingDelegate['willDeletePath']('"+e+"') threw an exception: "+s.message)}r.node_ops.unlink(r,t),o.destroyNode(i);try{o.trackingDelegate.onDeletePath&&o.trackingDelegate.onDeletePath(e)}catch(s){console.log("FS.trackingDelegate['onDeletePath']('"+e+"') threw an exception: "+s.message)}},readlink:function(e){var n=o.lookupPath(e),r=n.node;if(!r)throw new o.ErrnoError(44);if(!r.node_ops.readlink)throw new o.ErrnoError(28);return $.resolve(o.getPath(r.parent),r.node_ops.readlink(r))},stat:function(e,n){var r=o.lookupPath(e,{follow:!n}),t=r.node;if(!t)throw new o.ErrnoError(44);if(!t.node_ops.getattr)throw new o.ErrnoError(63);return t.node_ops.getattr(t)},lstat:function(e){return o.stat(e,!0)},chmod:function(e,n,r){var t;if(typeof e=="string"){var i=o.lookupPath(e,{follow:!r});t=i.node}else t=e;if(!t.node_ops.setattr)throw new o.ErrnoError(63);t.node_ops.setattr(t,{mode:n&4095|t.mode&-4096,timestamp:Date.now()})},lchmod:function(e,n){o.chmod(e,n,!0)},fchmod:function(e,n){var r=o.getStream(e);if(!r)throw new o.ErrnoError(8);o.chmod(r.node,n)},chown:function(e,n,r,t){var i;if(typeof e=="string"){var a=o.lookupPath(e,{follow:!t});i=a.node}else i=e;if(!i.node_ops.setattr)throw new o.ErrnoError(63);i.node_ops.setattr(i,{timestamp:Date.now()})},lchown:function(e,n,r){o.chown(e,n,r,!0)},fchown:function(e,n,r){var t=o.getStream(e);if(!t)throw new o.ErrnoError(8);o.chown(t.node,n,r)},truncate:function(e,n){if(n<0)throw new o.ErrnoError(28);var r;if(typeof e=="string"){var t=o.lookupPath(e,{follow:!0});r=t.node}else r=e;if(!r.node_ops.setattr)throw new o.ErrnoError(63);if(o.isDir(r.mode))throw new o.ErrnoError(31);if(!o.isFile(r.mode))throw new o.ErrnoError(28);var i=o.nodePermissions(r,"w");if(i)throw new o.ErrnoError(i);r.node_ops.setattr(r,{size:n,timestamp:Date.now()})},ftruncate:function(e,n){var r=o.getStream(e);if(!r)throw new o.ErrnoError(8);if(!(r.flags&2097155))throw new o.ErrnoError(28);o.truncate(r.node,n)},utime:function(e,n,r){var t=o.lookupPath(e,{follow:!0}),i=t.node;i.node_ops.setattr(i,{timestamp:Math.max(n,r)})},open:function(e,n,r,t,i){if(e==="")throw new o.ErrnoError(44);n=typeof n=="string"?o.modeStringToFlags(n):n,r=typeof r>"u"?438:r,n&64?r=r&4095|32768:r=0;var a;if(typeof e=="object")a=e;else{e=C.normalize(e);try{var s=o.lookupPath(e,{follow:!(n&131072)});a=s.node}catch{}}var c=!1;if(n&64)if(a){if(n&128)throw new o.ErrnoError(20)}else a=o.mknod(e,r,0),c=!0;if(!a)throw new o.ErrnoError(44);if(o.isChrdev(a.mode)&&(n&=-513),n&65536&&!o.isDir(a.mode))throw new o.ErrnoError(54);if(!c){var d=o.mayOpen(a,n);if(d)throw new o.ErrnoError(d)}n&512&&o.truncate(a,0),n&=-641;var v=o.createStream({node:a,path:o.getPath(a),flags:n,seekable:!0,position:0,stream_ops:a.stream_ops,ungotten:[],error:!1},t,i);v.stream_ops.open&&v.stream_ops.open(v),f.logReadFiles&&!(n&1)&&(o.readFiles||(o.readFiles={}),e in o.readFiles||(o.readFiles[e]=1,console.log("FS.trackingDelegate error on read file: "+e)));try{if(o.trackingDelegate.onOpenFile){var h=0;(n&2097155)!==1&&(h|=o.tracking.openFlags.READ),n&2097155&&(h|=o.tracking.openFlags.WRITE),o.trackingDelegate.onOpenFile(e,h)}}catch(p){console.log("FS.trackingDelegate['onOpenFile']('"+e+"', flags) threw an exception: "+p.message)}return v},close:function(e){if(o.isClosed(e))throw new o.ErrnoError(8);e.getdents&&(e.getdents=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(n){throw n}finally{o.closeStream(e.fd)}e.fd=null},isClosed:function(e){return e.fd===null},llseek:function(e,n,r){if(o.isClosed(e))throw new o.ErrnoError(8);if(!e.seekable||!e.stream_ops.llseek)throw new o.ErrnoError(70);if(r!=0&&r!=1&&r!=2)throw new o.ErrnoError(28);return e.position=e.stream_ops.llseek(e,n,r),e.ungotten=[],e.position},read:function(e,n,r,t,i){if(t<0||i<0)throw new o.ErrnoError(28);if(o.isClosed(e))throw new o.ErrnoError(8);if((e.flags&2097155)===1)throw new o.ErrnoError(8);if(o.isDir(e.node.mode))throw new o.ErrnoError(31);if(!e.stream_ops.read)throw new o.ErrnoError(28);var a=typeof i<"u";if(!a)i=e.position;else if(!e.seekable)throw new o.ErrnoError(70);var s=e.stream_ops.read(e,n,r,t,i);return a||(e.position+=s),s},write:function(e,n,r,t,i,a){if(t<0||i<0)throw new o.ErrnoError(28);if(o.isClosed(e))throw new o.ErrnoError(8);if(!(e.flags&2097155))throw new o.ErrnoError(8);if(o.isDir(e.node.mode))throw new o.ErrnoError(31);if(!e.stream_ops.write)throw new o.ErrnoError(28);e.flags&1024&&o.llseek(e,0,2);var s=typeof i<"u";if(!s)i=e.position;else if(!e.seekable)throw new o.ErrnoError(70);var c=e.stream_ops.write(e,n,r,t,i,a);s||(e.position+=c);try{e.path&&o.trackingDelegate.onWriteToFile&&o.trackingDelegate.onWriteToFile(e.path)}catch(d){console.log("FS.trackingDelegate['onWriteToFile']('"+e.path+"') threw an exception: "+d.message)}return c},allocate:function(e,n,r){if(o.isClosed(e))throw new o.ErrnoError(8);if(n<0||r<=0)throw new o.ErrnoError(28);if(!(e.flags&2097155))throw new o.ErrnoError(8);if(!o.isFile(e.node.mode)&&!o.isDir(e.node.mode))throw new o.ErrnoError(43);if(!e.stream_ops.allocate)throw new o.ErrnoError(138);e.stream_ops.allocate(e,n,r)},mmap:function(e,n,r,t,i,a,s){if(a&2&&!(s&2)&&(e.flags&2097155)!==2)throw new o.ErrnoError(2);if((e.flags&2097155)===1)throw new o.ErrnoError(2);if(!e.stream_ops.mmap)throw new o.ErrnoError(43);return e.stream_ops.mmap(e,n,r,t,i,a,s)},msync:function(e,n,r,t,i){return!e||!e.stream_ops.msync?0:e.stream_ops.msync(e,n,r,t,i)},munmap:function(e){return 0},ioctl:function(e,n,r){if(!e.stream_ops.ioctl)throw new o.ErrnoError(59);return e.stream_ops.ioctl(e,n,r)},readFile:function(e,n){if(n=n||{},n.flags=n.flags||"r",n.encoding=n.encoding||"binary",n.encoding!=="utf8"&&n.encoding!=="binary")throw new Error('Invalid encoding type "'+n.encoding+'"');var r,t=o.open(e,n.flags),i=o.stat(e),a=i.size,s=new Uint8Array(a);return o.read(t,s,0,a,0),n.encoding==="utf8"?r=we(s,0):n.encoding==="binary"&&(r=s),o.close(t),r},writeFile:function(e,n,r){r=r||{},r.flags=r.flags||"w";var t=o.open(e,r.flags,r.mode);if(typeof n=="string"){var i=new Uint8Array(Ee(n)+1),a=Ye(n,i,0,i.length);o.write(t,i,0,a,void 0,r.canOwn)}else if(ArrayBuffer.isView(n))o.write(t,n,0,n.byteLength,void 0,r.canOwn);else throw new Error("Unsupported data type");o.close(t)},cwd:function(){return o.currentPath},chdir:function(e){var n=o.lookupPath(e,{follow:!0});if(n.node===null)throw new o.ErrnoError(44);if(!o.isDir(n.node.mode))throw new o.ErrnoError(54);var r=o.nodePermissions(n.node,"x");if(r)throw new o.ErrnoError(r);o.currentPath=n.path},createDefaultDirectories:function(){o.mkdir("/tmp"),o.mkdir("/home"),o.mkdir("/home/web_user")},createDefaultDevices:function(){o.mkdir("/dev"),o.registerDevice(o.makedev(1,3),{read:function(){return 0},write:function(t,i,a,s,c){return s}}),o.mkdev("/dev/null",o.makedev(1,3)),pe.register(o.makedev(5,0),pe.default_tty_ops),pe.register(o.makedev(6,0),pe.default_tty1_ops),o.mkdev("/dev/tty",o.makedev(5,0)),o.mkdev("/dev/tty1",o.makedev(6,0));var e;if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var n=new Uint8Array(1);e=function(){return crypto.getRandomValues(n),n[0]}}else if(ce)try{var r=Co();e=function(){return r.randomBytes(1)[0]}}catch{}e||(e=function(){M("random_device")}),o.createDevice("/dev","random",e),o.createDevice("/dev","urandom",e),o.mkdir("/dev/shm"),o.mkdir("/dev/shm/tmp")},createSpecialDirectories:function(){o.mkdir("/proc"),o.mkdir("/proc/self"),o.mkdir("/proc/self/fd"),o.mount({mount:function(){var e=o.createNode("/proc/self","fd",16895,73);return e.node_ops={lookup:function(n,r){var t=+r,i=o.getStream(t);if(!i)throw new o.ErrnoError(8);var a={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:function(){return i.path}}};return a.parent=a,a}},e}},{},"/proc/self/fd")},createStandardStreams:function(){f.stdin?o.createDevice("/dev","stdin",f.stdin):o.symlink("/dev/tty","/dev/stdin"),f.stdout?o.createDevice("/dev","stdout",null,f.stdout):o.symlink("/dev/tty","/dev/stdout"),f.stderr?o.createDevice("/dev","stderr",null,f.stderr):o.symlink("/dev/tty1","/dev/stderr"),o.open("/dev/stdin","r"),o.open("/dev/stdout","w"),o.open("/dev/stderr","w")},ensureErrnoError:function(){o.ErrnoError||(o.ErrnoError=function(n,r){this.node=r,this.setErrno=function(t){this.errno=t},this.setErrno(n),this.message="FS error"},o.ErrnoError.prototype=new Error,o.ErrnoError.prototype.constructor=o.ErrnoError,[44].forEach(function(e){o.genericErrors[e]=new o.ErrnoError(e),o.genericErrors[e].stack="<generic error, no stack>"}))},staticInit:function(){o.ensureErrnoError(),o.nameTable=new Array(4096),o.mount(L,{},"/"),o.createDefaultDirectories(),o.createDefaultDevices(),o.createSpecialDirectories(),o.filesystems={MEMFS:L,IDBFS:z}},init:function(e,n,r){o.init.initialized=!0,o.ensureErrnoError(),f.stdin=e||f.stdin,f.stdout=n||f.stdout,f.stderr=r||f.stderr,o.createStandardStreams()},quit:function(){o.init.initialized=!1;var e=f._fflush;e&&e(0);for(var n=0;n<o.streams.length;n++){var r=o.streams[n];r&&o.close(r)}},getMode:function(e,n){var r=0;return e&&(r|=365),n&&(r|=146),r},joinPath:function(e,n){var r=C.join.apply(null,e);return n&&r[0]=="/"&&(r=r.substr(1)),r},absolutePath:function(e,n){return $.resolve(n,e)},standardizePath:function(e){return C.normalize(e)},findObject:function(e,n){var r=o.analyzePath(e,n);return r.exists?r.object:(ve(r.error),null)},analyzePath:function(e,n){try{var r=o.lookupPath(e,{follow:!n});e=r.path}catch{}var t={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var r=o.lookupPath(e,{parent:!0});t.parentExists=!0,t.parentPath=r.path,t.parentObject=r.node,t.name=C.basename(e),r=o.lookupPath(e,{follow:!n}),t.exists=!0,t.path=r.path,t.object=r.node,t.name=r.node.name,t.isRoot=r.path==="/"}catch(i){t.error=i.errno}return t},createFolder:function(e,n,r,t){var i=C.join2(typeof e=="string"?e:o.getPath(e),n),a=o.getMode(r,t);return o.mkdir(i,a)},createPath:function(e,n,r,t){e=typeof e=="string"?e:o.getPath(e);for(var i=n.split("/").reverse();i.length;){var a=i.pop();if(a){var s=C.join2(e,a);try{o.mkdir(s)}catch{}e=s}}return s},createFile:function(e,n,r,t,i){var a=C.join2(typeof e=="string"?e:o.getPath(e),n),s=o.getMode(t,i);return o.create(a,s)},createDataFile:function(e,n,r,t,i,a){var s=n?C.join2(typeof e=="string"?e:o.getPath(e),n):e,c=o.getMode(t,i),d=o.create(s,c);if(r){if(typeof r=="string"){for(var v=new Array(r.length),h=0,p=r.length;h<p;++h)v[h]=r.charCodeAt(h);r=v}o.chmod(d,c|146);var g=o.open(d,"w");o.write(g,r,0,r.length,0,a),o.close(g),o.chmod(d,c)}return d},createDevice:function(e,n,r,t){var i=C.join2(typeof e=="string"?e:o.getPath(e),n),a=o.getMode(!!r,!!t);o.createDevice.major||(o.createDevice.major=64);var s=o.makedev(o.createDevice.major++,0);return o.registerDevice(s,{open:function(c){c.seekable=!1},close:function(c){t&&t.buffer&&t.buffer.length&&t(10)},read:function(c,d,v,h,p){for(var g=0,_=0;_<h;_++){var k;try{k=r()}catch{throw new o.ErrnoError(29)}if(k===void 0&&g===0)throw new o.ErrnoError(6);if(k==null)break;g++,d[v+_]=k}return g&&(c.node.timestamp=Date.now()),g},write:function(c,d,v,h,p){for(var g=0;g<h;g++)try{t(d[v+g])}catch{throw new o.ErrnoError(29)}return h&&(c.node.timestamp=Date.now()),g}}),o.mkdev(i,a,s)},createLink:function(e,n,r,t,i){var a=C.join2(typeof e=="string"?e:o.getPath(e),n);return o.symlink(r,a)},forceLoadFile:function(e){if(e.isDevice||e.isFolder||e.link||e.contents)return!0;var n=!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(ye)try{e.contents=ee(ye(e.url),!0),e.usedBytes=e.contents.length}catch{n=!1}else throw new Error("Cannot load without read() or XMLHttpRequest.");return n||ve(29),n},createLazyFile:function(e,n,r,t,i){function a(){this.lengthKnown=!1,this.chunks=[]}if(a.prototype.get=function(g){if(!(g>this.length-1||g<0)){var _=g%this.chunkSize,k=g/this.chunkSize|0;return this.getter(k)[_]}},a.prototype.setDataGetter=function(g){this.getter=g},a.prototype.cacheLength=function(){var g=new XMLHttpRequest;if(g.open("HEAD",r,!1),g.send(null),!(g.status>=200&&g.status<300||g.status===304))throw new Error("Couldn't load "+r+". Status: "+g.status);var _=Number(g.getResponseHeader("Content-length")),k,R=(k=g.getResponseHeader("Accept-Ranges"))&&k==="bytes",O=(k=g.getResponseHeader("Content-Encoding"))&&k==="gzip",B=1024*1024;R||(B=_);var y=function(T,F){if(T>F)throw new Error("invalid range ("+T+", "+F+") or no bytes requested!");if(F>_-1)throw new Error("only "+_+" bytes available! programmer error!");var P=new XMLHttpRequest;if(P.open("GET",r,!1),_!==B&&P.setRequestHeader("Range","bytes="+T+"-"+F),typeof Uint8Array<"u"&&(P.responseType="arraybuffer"),P.overrideMimeType&&P.overrideMimeType("text/plain; charset=x-user-defined"),P.send(null),!(P.status>=200&&P.status<300||P.status===304))throw new Error("Couldn't load "+r+". Status: "+P.status);return P.response!==void 0?new Uint8Array(P.response||[]):ee(P.responseText||"",!0)},E=this;E.setDataGetter(function(T){var F=T*B,P=(T+1)*B-1;if(P=Math.min(P,_-1),typeof E.chunks[T]>"u"&&(E.chunks[T]=y(F,P)),typeof E.chunks[T]>"u")throw new Error("doXHR failed!");return E.chunks[T]}),(O||!_)&&(B=_=1,_=this.getter(0).length,B=_,console.log("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=_,this._chunkSize=B,this.lengthKnown=!0},typeof XMLHttpRequest<"u"){if(!ne)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var s=new a;Object.defineProperties(s,{length:{get:function(){return this.lengthKnown||this.cacheLength(),this._length}},chunkSize:{get:function(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}});var c={isDevice:!1,contents:s}}else var c={isDevice:!1,url:r};var d=o.createFile(e,n,c,t,i);c.contents?d.contents=c.contents:c.url&&(d.contents=null,d.url=c.url),Object.defineProperties(d,{usedBytes:{get:function(){return this.contents.length}}});var v={},h=Object.keys(d.stream_ops);return h.forEach(function(p){var g=d.stream_ops[p];v[p]=function(){if(!o.forceLoadFile(d))throw new o.ErrnoError(29);return g.apply(null,arguments)}}),v.read=function(g,_,k,R,O){if(!o.forceLoadFile(d))throw new o.ErrnoError(29);var B=g.node.contents;if(O>=B.length)return 0;var y=Math.min(B.length-O,R);if(B.slice)for(var E=0;E<y;E++)_[k+E]=B[O+E];else for(var E=0;E<y;E++)_[k+E]=B.get(O+E);return y},d.stream_ops=v,d},createPreloadedFile:function(e,n,r,t,i,a,s,c,d,v){m.init();var h=n?$.resolve(C.join2(e,n)):e;function p(g){function _(R){v&&v(),c||o.createDataFile(e,n,R,t,i,d),a&&a(),Be()}var k=!1;f.preloadPlugins.forEach(function(R){k||R.canHandle(h)&&(R.handle(g,h,_,function(){s&&s(),Be()}),k=!0)}),k||_(g)}Ge(),typeof r=="string"?m.asyncLoad(r,function(g){p(g)},s):p(r)},indexedDB:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},DB_NAME:function(){return"EM_FS_"+window.location.pathname},DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:function(e,n,r){n=n||function(){},r=r||function(){};var t=o.indexedDB();try{var i=t.open(o.DB_NAME(),o.DB_VERSION)}catch(a){return r(a)}i.onupgradeneeded=function(){console.log("creating db");var s=i.result;s.createObjectStore(o.DB_STORE_NAME)},i.onsuccess=function(){var s=i.result,c=s.transaction([o.DB_STORE_NAME],"readwrite"),d=c.objectStore(o.DB_STORE_NAME),v=0,h=0,p=e.length;function g(){h==0?n():r()}e.forEach(function(_){var k=d.put(o.analyzePath(_).object.contents,_);k.onsuccess=function(){v++,v+h==p&&g()},k.onerror=function(){h++,v+h==p&&g()}}),c.onerror=r},i.onerror=r},loadFilesFromDB:function(e,n,r){n=n||function(){},r=r||function(){};var t=o.indexedDB();try{var i=t.open(o.DB_NAME(),o.DB_VERSION)}catch(a){return r(a)}i.onupgradeneeded=r,i.onsuccess=function(){var s=i.result;try{var c=s.transaction([o.DB_STORE_NAME],"readonly")}catch(_){r(_);return}var d=c.objectStore(o.DB_STORE_NAME),v=0,h=0,p=e.length;function g(){h==0?n():r()}e.forEach(function(_){var k=d.get(_);k.onsuccess=function(){o.analyzePath(_).exists&&o.unlink(_),o.createDataFile(C.dirname(_),C.basename(_),k.result,!0,!0,!0),v++,v+h==p&&g()},k.onerror=function(){h++,v+h==p&&g()}}),c.onerror=r},i.onerror=r}};function an(e,n){if(m.mainLoop.timingMode=e,m.mainLoop.timingValue=n,!m.mainLoop.func)return 1;if(e==0)m.mainLoop.scheduler=function(){var s=Math.max(0,m.mainLoop.tickStartTime+n-he())|0;setTimeout(m.mainLoop.runner,s)},m.mainLoop.method="timeout";else if(e==1)m.mainLoop.scheduler=function(){m.requestAnimationFrame(m.mainLoop.runner)},m.mainLoop.method="rAF";else if(e==2){if(typeof setImmediate>"u"){var r=[],t="setimmediate",i=function(a){(a.data===t||a.data.target===t)&&(a.stopPropagation(),r.shift()())};addEventListener("message",i,!0),setImmediate=function(s){r.push(s),ne?(f.setImmediates===void 0&&(f.setImmediates=[]),f.setImmediates.push(s),postMessage({target:t})):postMessage(t,"*")}}m.mainLoop.scheduler=function(){setImmediate(m.mainLoop.runner)},m.mainLoop.method="immediate"}return 0}function he(){M()}function Rn(e,n,r,t,i){K=!0,H(!m.mainLoop.func,"emscripten_set_main_loop: there can only be one main loop function at once: call emscripten_cancel_main_loop to cancel the previous one before setting a new one with different parameters."),m.mainLoop.func=e,m.mainLoop.arg=t;var a;typeof t<"u"?a=function(){f.dynCall_vi(e,t)}:a=function(){f.dynCall_v(e)};var s=m.mainLoop.currentlyRunningMainloop;if(m.mainLoop.runner=function(){if(!X){if(m.mainLoop.queue.length>0){var d=Date.now(),v=m.mainLoop.queue.shift();if(v.func(v.arg),m.mainLoop.remainingBlockers){var h=m.mainLoop.remainingBlockers,p=h%1==0?h-1:Math.floor(h);v.counted?m.mainLoop.remainingBlockers=p:(p=p+.5,m.mainLoop.remainingBlockers=(8*h+p)/9)}if(console.log('main loop blocker "'+v.name+'" took '+(Date.now()-d)+" ms"),m.mainLoop.updateStatus(),s<m.mainLoop.currentlyRunningMainloop)return;setTimeout(m.mainLoop.runner,0);return}if(!(s<m.mainLoop.currentlyRunningMainloop)){if(m.mainLoop.currentFrameNumber=m.mainLoop.currentFrameNumber+1|0,m.mainLoop.timingMode==1&&m.mainLoop.timingValue>1&&m.mainLoop.currentFrameNumber%m.mainLoop.timingValue!=0){m.mainLoop.scheduler();return}else m.mainLoop.timingMode==0&&(m.mainLoop.tickStartTime=he());m.mainLoop.method==="timeout"&&f.ctx&&(q("Looks like you are rendering without using requestAnimationFrame for the main loop. You should use 0 for the frame rate in emscripten_set_main_loop in order to use requestAnimationFrame, as that can greatly improve your frame rates!"),m.mainLoop.method=""),m.mainLoop.runIter(a),!(s<m.mainLoop.currentlyRunningMainloop)&&(typeof u=="object"&&u.audio&&u.audio.queueNewAudioData&&u.audio.queueNewAudioData(),m.mainLoop.scheduler())}}},i||(n&&n>0?an(0,1e3/n):an(1,1),m.mainLoop.scheduler()),r)throw"SimulateInfiniteLoop"}var m={mainLoop:{scheduler:null,method:"",currentlyRunningMainloop:0,func:null,arg:0,timingMode:0,timingValue:0,currentFrameNumber:0,queue:[],pause:function(){m.mainLoop.scheduler=null,m.mainLoop.currentlyRunningMainloop++},resume:function(){m.mainLoop.currentlyRunningMainloop++;var e=m.mainLoop.timingMode,n=m.mainLoop.timingValue,r=m.mainLoop.func;m.mainLoop.func=null,Rn(r,0,!1,m.mainLoop.arg,!0),an(e,n),m.mainLoop.scheduler()},updateStatus:function(){if(f.setStatus){var e=f.statusMessage||"Please wait...",n=m.mainLoop.remainingBlockers,r=m.mainLoop.expectedBlockers;n?n<r?f.setStatus(e+" ("+(r-n)+"/"+r+")"):f.setStatus(e):f.setStatus("")}},runIter:function(e){if(!X){if(f.preMainLoop){var n=f.preMainLoop();if(n===!1)return}try{e()}catch(r){if(r instanceof $e)return;throw r&&typeof r=="object"&&r.stack&&q("exception thrown: "+[r,r.stack]),r}f.postMainLoop&&f.postMainLoop()}}},isFullscreen:!1,pointerLock:!1,moduleContextCreatedCallbacks:[],workers:[],init:function(){if(f.preloadPlugins||(f.preloadPlugins=[]),m.initted)return;m.initted=!0;try{new Blob,m.hasBlobConstructor=!0}catch{m.hasBlobConstructor=!1,console.log("warning: no blob constructor, cannot create blobs with mimetypes")}m.BlobBuilder=typeof MozBlobBuilder<"u"?MozBlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:m.hasBlobConstructor?null:console.log("warning: no BlobBuilder"),m.URLObject=typeof window<"u"?window.URL?window.URL:window.webkitURL:void 0,!f.noImageDecoding&&typeof m.URLObject>"u"&&(console.log("warning: Browser does not support creating object URLs. Built-in browser image decoding will not be available."),f.noImageDecoding=!0);var e={};e.canHandle=function(a){return!f.noImageDecoding&&/\.(jpg|jpeg|png|bmp)$/i.test(a)},e.handle=function(a,s,c,d){var v=null;if(m.hasBlobConstructor)try{v=new Blob([a],{type:m.getMimetype(s)}),v.size!==a.length&&(v=new Blob([new Uint8Array(a).buffer],{type:m.getMimetype(s)}))}catch(_){_e("Blob constructor present but fails: "+_+"; falling back to blob builder")}if(!v){var h=new m.BlobBuilder;h.append(new Uint8Array(a).buffer),v=h.getBlob()}var p=m.URLObject.createObjectURL(v),g=new Image;g.onload=function(){H(g.complete,"Image "+s+" could not be decoded");var k=document.createElement("canvas");k.width=g.width,k.height=g.height;var R=k.getContext("2d");R.drawImage(g,0,0),f.preloadedImages[s]=k,m.URLObject.revokeObjectURL(p),c&&c(a)},g.onerror=function(k){console.log("Image "+p+" could not be decoded"),d&&d()},g.src=p},f.preloadPlugins.push(e);var n={};n.canHandle=function(a){return!f.noAudioDecoding&&a.substr(-4)in{".ogg":1,".wav":1,".mp3":1}},n.handle=function(a,s,c,d){var v=!1;function h(R){v||(v=!0,f.preloadedAudios[s]=R,c&&c(a))}function p(){v||(v=!0,f.preloadedAudios[s]=new Audio,d&&d())}if(m.hasBlobConstructor){try{var g=new Blob([a],{type:m.getMimetype(s)})}catch{return p()}var _=m.URLObject.createObjectURL(g),k=new Audio;k.addEventListener("canplaythrough",function(){h(k)},!1),k.onerror=function(O){if(v)return;console.log("warning: browser could not fully decode audio "+s+", trying slower base64 approach");function B(y){for(var E="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",T="=",F="",P=0,j=0,J=0;J<y.length;J++)for(P=P<<8|y[J],j+=8;j>=6;){var Fo=P>>j-6&63;j-=6,F+=E[Fo]}return j==2?(F+=E[(P&3)<<4],F+=T+T):j==4&&(F+=E[(P&15)<<2],F+=T),F}k.src="data:audio/x-"+s.substr(-3)+";base64,"+B(a),h(k)},k.src=_,m.safeSetTimeout(function(){h(k)},1e4)}else return p()},f.preloadPlugins.push(n);function r(){m.pointerLock=document.pointerLockElement===f.canvas||document.mozPointerLockElement===f.canvas||document.webkitPointerLockElement===f.canvas||document.msPointerLockElement===f.canvas}var t=f.canvas;t&&(t.requestPointerLock=t.requestPointerLock||t.mozRequestPointerLock||t.webkitRequestPointerLock||t.msRequestPointerLock||function(){},t.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock||document.msExitPointerLock||function(){},t.exitPointerLock=t.exitPointerLock.bind(document),document.addEventListener("pointerlockchange",r,!1),document.addEventListener("mozpointerlockchange",r,!1),document.addEventListener("webkitpointerlockchange",r,!1),document.addEventListener("mspointerlockchange",r,!1),f.elementPointerLock&&t.addEventListener("click",function(i){!m.pointerLock&&f.canvas.requestPointerLock&&(f.canvas.requestPointerLock(),i.preventDefault())},!1))},createContext:function(e,n,r,t){if(n&&f.ctx&&e==f.canvas)return f.ctx;var i,a;if(n){var s={antialias:!1,alpha:!1,majorVersion:1};if(t)for(var c in t)s[c]=t[c];typeof x<"u"&&(a=x.createContext(e,s),a&&(i=x.getContext(a).GLctx))}else i=e.getContext("2d");return i?(r&&(n||H(typeof ge>"u","cannot set in module if GLctx is used, but we are a non-GL context that would replace it"),f.ctx=i,n&&x.makeContextCurrent(a),f.useWebGL=n,m.moduleContextCreatedCallbacks.forEach(function(d){d()}),m.init()),i):null},destroyContext:function(e,n,r){},fullscreenHandlersInstalled:!1,lockPointer:void 0,resizeCanvas:void 0,requestFullscreen:function(e,n,r){m.lockPointer=e,m.resizeCanvas=n,m.vrDevice=r,typeof m.lockPointer>"u"&&(m.lockPointer=!0),typeof m.resizeCanvas>"u"&&(m.resizeCanvas=!1),typeof m.vrDevice>"u"&&(m.vrDevice=null);var t=f.canvas;function i(){m.isFullscreen=!1;var s=t.parentNode;(document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement)===s?(t.exitFullscreen=m.exitFullscreen,m.lockPointer&&t.requestPointerLock(),m.isFullscreen=!0,m.resizeCanvas?m.setFullscreenCanvasSize():m.updateCanvasDimensions(t)):(s.parentNode.insertBefore(t,s),s.parentNode.removeChild(s),m.resizeCanvas?m.setWindowedCanvasSize():m.updateCanvasDimensions(t)),f.onFullScreen&&f.onFullScreen(m.isFullscreen),f.onFullscreen&&f.onFullscreen(m.isFullscreen)}m.fullscreenHandlersInstalled||(m.fullscreenHandlersInstalled=!0,document.addEventListener("fullscreenchange",i,!1),document.addEventListener("mozfullscreenchange",i,!1),document.addEventListener("webkitfullscreenchange",i,!1),document.addEventListener("MSFullscreenChange",i,!1));var a=document.createElement("div");t.parentNode.insertBefore(a,t),a.appendChild(t),a.requestFullscreen=a.requestFullscreen||a.mozRequestFullScreen||a.msRequestFullscreen||(a.webkitRequestFullscreen?function(){a.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}:null)||(a.webkitRequestFullScreen?function(){a.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT)}:null),r?a.requestFullscreen({vrDisplay:r}):a.requestFullscreen()},exitFullscreen:function(){if(!m.isFullscreen)return!1;var e=document.exitFullscreen||document.cancelFullScreen||document.mozCancelFullScreen||document.msExitFullscreen||document.webkitCancelFullScreen||function(){};return e.apply(document,[]),!0},nextRAF:0,fakeRequestAnimationFrame:function(e){var n=Date.now();if(m.nextRAF===0)m.nextRAF=n+1e3/60;else for(;n+2>=m.nextRAF;)m.nextRAF+=1e3/60;var r=Math.max(m.nextRAF-n,0);setTimeout(e,r)},requestAnimationFrame:function(e){if(typeof requestAnimationFrame=="function"){requestAnimationFrame(e);return}var n=m.fakeRequestAnimationFrame;n(e)},safeCallback:function(e){return function(){if(!X)return e.apply(null,arguments)}},allowAsyncCallbacks:!0,queuedAsyncCallbacks:[],pauseAsyncCallbacks:function(){m.allowAsyncCallbacks=!1},resumeAsyncCallbacks:function(){if(m.allowAsyncCallbacks=!0,m.queuedAsyncCallbacks.length>0){var e=m.queuedAsyncCallbacks;m.queuedAsyncCallbacks=[],e.forEach(function(n){n()})}},safeRequestAnimationFrame:function(e){return m.requestAnimationFrame(function(){X||(m.allowAsyncCallbacks?e():m.queuedAsyncCallbacks.push(e))})},safeSetTimeout:function(e,n){return K=!0,setTimeout(function(){X||(m.allowAsyncCallbacks?e():m.queuedAsyncCallbacks.push(e))},n)},safeSetInterval:function(e,n){return K=!0,setInterval(function(){X||m.allowAsyncCallbacks&&e()},n)},getMimetype:function(e){return{jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",bmp:"image/bmp",ogg:"audio/ogg",wav:"audio/wav",mp3:"audio/mpeg"}[e.substr(e.lastIndexOf(".")+1)]},getUserMedia:function(e){window.getUserMedia||(window.getUserMedia=navigator.getUserMedia||navigator.mozGetUserMedia),window.getUserMedia(e)},getMovementX:function(e){return e.movementX||e.mozMovementX||e.webkitMovementX||0},getMovementY:function(e){return e.movementY||e.mozMovementY||e.webkitMovementY||0},getMouseWheelDelta:function(e){var n=0;switch(e.type){case"DOMMouseScroll":n=e.detail/3;break;case"mousewheel":n=e.wheelDelta/120;break;case"wheel":switch(n=e.deltaY,e.deltaMode){case 0:n/=100;break;case 1:n/=3;break;case 2:n*=80;break;default:throw"unrecognized mouse wheel delta mode: "+e.deltaMode}break;default:throw"unrecognized mouse wheel event: "+e.type}return n},mouseX:0,mouseY:0,mouseMovementX:0,mouseMovementY:0,touches:{},lastTouches:{},calculateMouseEvent:function(e){if(m.pointerLock)e.type!="mousemove"&&"mozMovementX"in e?m.mouseMovementX=m.mouseMovementY=0:(m.mouseMovementX=m.getMovementX(e),m.mouseMovementY=m.getMovementY(e)),typeof u<"u"?(m.mouseX=u.mouseX+m.mouseMovementX,m.mouseY=u.mouseY+m.mouseMovementY):(m.mouseX+=m.mouseMovementX,m.mouseY+=m.mouseMovementY);else{var n=f.canvas.getBoundingClientRect(),r=f.canvas.width,t=f.canvas.height,i=typeof window.scrollX<"u"?window.scrollX:window.pageXOffset,a=typeof window.scrollY<"u"?window.scrollY:window.pageYOffset;if(e.type==="touchstart"||e.type==="touchend"||e.type==="touchmove"){var s=e.touch;if(s===void 0)return;var c=s.pageX-(i+n.left),d=s.pageY-(a+n.top);c=c*(r/n.width),d=d*(t/n.height);var v={x:c,y:d};if(e.type==="touchstart")m.lastTouches[s.identifier]=v,m.touches[s.identifier]=v;else if(e.type==="touchend"||e.type==="touchmove"){var h=m.touches[s.identifier];h||(h=v),m.lastTouches[s.identifier]=h,m.touches[s.identifier]=v}return}var p=e.pageX-(i+n.left),g=e.pageY-(a+n.top);p=p*(r/n.width),g=g*(t/n.height),m.mouseMovementX=p-m.mouseX,m.mouseMovementY=g-m.mouseY,m.mouseX=p,m.mouseY=g}},asyncLoad:function(e,n,r,t){var i=t?"":"al "+e;gn(e,function(a){H(a,'Loading data file "'+e+'" failed (no arrayBuffer).'),n(new Uint8Array(a)),i&&Be()},function(a){if(r)r();else throw'Loading data file "'+e+'" failed.'}),i&&Ge()},resizeListeners:[],updateResizeListeners:function(){var e=f.canvas;m.resizeListeners.forEach(function(n){n(e.width,e.height)})},setCanvasSize:function(e,n,r){var t=f.canvas;m.updateCanvasDimensions(t,e,n),r||m.updateResizeListeners()},windowedWidth:0,windowedHeight:0,setFullscreenCanvasSize:function(){if(typeof u<"u"){var e=ke[u.screen>>2];e=e|8388608,l[u.screen>>2]=e}m.updateCanvasDimensions(f.canvas),m.updateResizeListeners()},setWindowedCanvasSize:function(){if(typeof u<"u"){var e=ke[u.screen>>2];e=e&-8388609,l[u.screen>>2]=e}m.updateCanvasDimensions(f.canvas),m.updateResizeListeners()},updateCanvasDimensions:function(e,n,r){n&&r?(e.widthNative=n,e.heightNative=r):(n=e.widthNative,r=e.heightNative);var t=n,i=r;if(f.forcedAspectRatio&&f.forcedAspectRatio>0&&(t/i<f.forcedAspectRatio?t=Math.round(i*f.forcedAspectRatio):i=Math.round(t/f.forcedAspectRatio)),(document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement)===e.parentNode&&typeof screen<"u"){var a=Math.min(screen.width/t,screen.height/i);t=Math.round(t*a),i=Math.round(i*a)}m.resizeCanvas?(e.width!=t&&(e.width=t),e.height!=i&&(e.height=i),typeof e.style<"u"&&(e.style.removeProperty("width"),e.style.removeProperty("height"))):(e.width!=n&&(e.width=n),e.height!=r&&(e.height=r),typeof e.style<"u"&&(t!=n||i!=r?(e.style.setProperty("width",t+"px","important"),e.style.setProperty("height",i+"px","important")):(e.style.removeProperty("width"),e.style.removeProperty("height"))))},wgetRequests:{},nextWgetRequestHandle:0,getNextWgetRequestHandle:function(){var e=m.nextWgetRequestHandle;return m.nextWgetRequestHandle++,e}};function Pn(){return Date.now()-u.startTime|0}function On(e){var n=u.surfaces[e];if(n.locked++,n.locked>1||(n.buffer||(n.buffer=Y(n.width*n.height*4),l[e+20>>2]=n.buffer),l[e+20>>2]=n.buffer,e==u.screen&&f.screenIsReadOnly&&n.image))return 0;if(u.defaults.discardOnLock){if(n.image||(n.image=n.ctx.createImageData(n.width,n.height)),!u.defaults.opaqueFrontBuffer)return}else n.image=n.ctx.getImageData(0,0,n.width,n.height);if(e==u.screen&&u.defaults.opaqueFrontBuffer)for(var r=n.image.data,t=r.length,i=0;i<t/4;i++)r[i*4+3]=255;if(u.defaults.copyOnLock&&!u.defaults.discardOnLock){if(n.isFlagSet(2097152))throw"CopyOnLock is not supported for SDL_LockSurface with SDL_HWPALETTE flag set"+new Error().stack;I.set(n.image.data,n.buffer)}return 0}var u={defaults:{width:320,height:200,copyOnLock:!0,discardOnLock:!1,opaqueFrontBuffer:!0},version:null,surfaces:{},canvasPool:[],events:[],fonts:[null],audios:[null],rwops:[null],music:{audio:null,volume:1},mixerFrequency:22050,mixerFormat:32784,mixerNumChannels:2,mixerChunkSize:1024,channelMinimumNumber:0,GL:!1,glAttributes:{0:3,1:3,2:2,3:0,4:0,5:1,6:16,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:1,16:0,17:0,18:0},keyboardState:null,keyboardMap:{},canRequestFullscreen:!1,isRequestingFullscreen:!1,textInput:!1,startTime:null,initFlags:0,buttonState:0,modState:0,DOMButtons:[0,0,0],DOMEventToSDLEvent:{},TOUCH_DEFAULT_ID:0,eventHandler:null,eventHandlerContext:null,eventHandlerTemp:0,keyCodes:{16:1249,17:1248,18:1250,20:1081,33:1099,34:1102,35:1101,36:1098,37:1104,38:1106,39:1103,40:1105,44:316,45:1097,46:127,91:1251,93:1125,96:1122,97:1113,98:1114,99:1115,100:1116,101:1117,102:1118,103:1119,104:1120,105:1121,106:1109,107:1111,109:1110,110:1123,111:1108,112:1082,113:1083,114:1084,115:1085,116:1086,117:1087,118:1088,119:1089,120:1090,121:1091,122:1092,123:1093,124:1128,125:1129,126:1130,127:1131,128:1132,129:1133,130:1134,131:1135,132:1136,133:1137,134:1138,135:1139,144:1107,160:94,161:33,162:34,163:35,164:36,165:37,166:38,167:95,168:40,169:41,170:42,171:43,172:124,173:45,174:123,175:125,176:126,181:127,182:129,183:128,188:44,190:46,191:47,192:96,219:91,220:92,221:93,222:39,224:1251},scanCodes:{8:42,9:43,13:40,27:41,32:44,35:204,39:53,44:54,46:55,47:56,48:39,49:30,50:31,51:32,52:33,53:34,54:35,55:36,56:37,57:38,58:203,59:51,61:46,91:47,92:49,93:48,96:52,97:4,98:5,99:6,100:7,101:8,102:9,103:10,104:11,105:12,106:13,107:14,108:15,109:16,110:17,111:18,112:19,113:20,114:21,115:22,116:23,117:24,118:25,119:26,120:27,121:28,122:29,127:76,305:224,308:226,316:70},loadRect:function(e){return{x:l[e+0>>2],y:l[e+4>>2],w:l[e+8>>2],h:l[e+12>>2]}},updateRect:function(e,n){l[e>>2]=n.x,l[e+4>>2]=n.y,l[e+8>>2]=n.w,l[e+12>>2]=n.h},intersectionOfRects:function(e,n){var r=Math.max(e.x,n.x),t=Math.max(e.y,n.y),i=Math.min(e.x+e.w,n.x+n.w),a=Math.min(e.y+e.h,n.y+n.h);return{x:r,y:t,w:Math.max(r,i)-r,h:Math.max(t,a)-t}},checkPixelFormat:function(e){},loadColorToCSSRGB:function(e){var n=l[e>>2];return"rgb("+(n&255)+","+(n>>8&255)+","+(n>>16&255)+")"},loadColorToCSSRGBA:function(e){var n=l[e>>2];return"rgba("+(n&255)+","+(n>>8&255)+","+(n>>16&255)+","+(n>>24&255)/255+")"},translateColorToCSSRGBA:function(e){return"rgba("+(e&255)+","+(e>>8&255)+","+(e>>16&255)+","+(e>>>24)/255+")"},translateRGBAToCSSRGBA:function(e,n,r,t){return"rgba("+(e&255)+","+(n&255)+","+(r&255)+","+(t&255)/255+")"},translateRGBAToColor:function(e,n,r,t){return e|n<<8|r<<16|t<<24},makeSurface:function(e,n,r,t,i,a,s,c,d){r=r||0;var v=r&1,h=r&2097152,p=r&67108864,g=Y(60),_=Y(44),k=h?1:4,R=0;!v&&!p&&(R=Y(e*n*4)),l[g>>2]=r,l[g+4>>2]=_,l[g+8>>2]=e,l[g+12>>2]=n,l[g+16>>2]=e*k,l[g+20>>2]=R,l[g+36>>2]=0,l[g+40>>2]=0,l[g+44>>2]=f.canvas.width,l[g+48>>2]=f.canvas.height,l[g+56>>2]=1,l[_>>2]=-2042224636,l[_+4>>2]=0,b[_+8>>0]=k*8,b[_+9>>0]=k,l[_+12>>2]=a||255,l[_+16>>2]=s||65280,l[_+20>>2]=c||16711680,l[_+24>>2]=d||4278190080,u.GL=u.GL||p;var O;t?O=f.canvas:(u.canvasPool.length>0?O=u.canvasPool.pop():O=document.createElement("canvas"),O.width=e,O.height=n);var B={antialias:u.glAttributes[13]!=0&&u.glAttributes[14]>1,depth:u.glAttributes[6]>0,stencil:u.glAttributes[7]>0,alpha:u.glAttributes[3]>0},y=m.createContext(O,p,t,B);return u.surfaces[g]={width:e,height:n,canvas:O,ctx:y,surf:g,buffer:R,pixelFormat:_,alpha:255,flags:r,locked:0,usePageCanvas:t,source:i,isFlagSet:function(E){return r&E}},g},copyIndexedColorData:function(e,n,r,t,i){if(e.colors){var a=f.canvas.width,s=f.canvas.height,c=n||0,d=r||0,v=(t||a-c)+c,h=(i||s-d)+d,p=e.buffer;e.image.data32||(e.image.data32=new Uint32Array(e.image.data.buffer));for(var g=e.image.data32,_=e.colors32,k=d;k<h;++k)for(var R=k*a,O=c;O<v;++O)g[R+O]=_[I[p+R+O>>0]]}},freeSurface:function(e){var n=e+56,r=l[n>>2];if(r>1){l[n>>2]=r-1;return}var t=u.surfaces[e];!t.usePageCanvas&&t.canvas&&u.canvasPool.push(t.canvas),t.buffer&&fe(t.buffer),fe(t.pixelFormat),fe(e),u.surfaces[e]=null,e===u.screen&&(u.screen=null)},blitSurface:function(e,n,r,t,i){var a=u.surfaces[e],s=u.surfaces[r],c,d;if(n?c=u.loadRect(n):c={x:0,y:0,w:a.width,h:a.height},t?d=u.loadRect(t):d={x:0,y:0,w:a.width,h:a.height},s.clipRect){var v=!i||c.w===0?1:c.w/d.w,h=!i||c.h===0?1:c.h/d.h;d=u.intersectionOfRects(s.clipRect,d),c.w=d.w*v,c.h=d.h*h,t&&u.updateRect(t,d)}var p,g;if(i?(p=d.w,g=d.h):(p=c.w,g=c.h),c.w===0||c.h===0||p===0||g===0)return 0;var _=s.ctx.globalAlpha;return s.ctx.globalAlpha=a.alpha/255,s.ctx.drawImage(a.canvas,c.x,c.y,c.w,c.h,d.x,d.y,p,g),s.ctx.globalAlpha=_,r!=u.screen&&(_e("WARNING: copying canvas data to memory for compatibility"),On(r),s.locked--),0},downFingers:{},savedKeydown:null,receiveEvent:function(e){function n(){for(var h in u.keyboardMap)u.events.push({type:"keyup",keyCode:u.keyboardMap[h]})}switch(e.type){case"touchstart":case"touchmove":{e.preventDefault();var r=[];if(e.type==="touchstart")for(var t=0;t<e.touches.length;t++){var i=e.touches[t];u.downFingers[i.identifier]!=!0&&(u.downFingers[i.identifier]=!0,r.push(i))}else r=e.touches;var a=r[0];if(a){e.type=="touchstart"&&(u.DOMButtons[0]=1);var s;switch(e.type){case"touchstart":s="mousedown";break;case"touchmove":s="mousemove";break}var c={type:s,button:0,pageX:a.clientX,pageY:a.clientY};u.events.push(c)}for(var t=0;t<r.length;t++){var i=r[t];u.events.push({type:e.type,touch:i})}break}case"touchend":{e.preventDefault();for(var t=0;t<e.changedTouches.length;t++){var i=e.changedTouches[t];u.downFingers[i.identifier]===!0&&delete u.downFingers[i.identifier]}var c={type:"mouseup",button:0,pageX:e.changedTouches[0].clientX,pageY:e.changedTouches[0].clientY};u.DOMButtons[0]=0,u.events.push(c);for(var t=0;t<e.changedTouches.length;t++){var i=e.changedTouches[t];u.events.push({type:"touchend",touch:i})}break}case"DOMMouseScroll":case"mousewheel":case"wheel":var d=-m.getMouseWheelDelta(e);d=d==0?0:d>0?Math.max(d,1):Math.min(d,-1);var v=d>0?3:4;u.events.push({type:"mousedown",button:v,pageX:e.pageX,pageY:e.pageY}),u.events.push({type:"mouseup",button:v,pageX:e.pageX,pageY:e.pageY}),u.events.push({type:"wheel",deltaX:0,deltaY:d}),e.preventDefault();break;case"mousemove":if(u.DOMButtons[0]===1&&u.events.push({type:"touchmove",touch:{identifier:0,deviceID:-1,pageX:e.pageX,pageY:e.pageY}}),m.pointerLock&&("mozMovementX"in e&&(e.movementX=e.mozMovementX,e.movementY=e.mozMovementY),e.movementX==0&&e.movementY==0)){e.preventDefault();return}case"keydown":case"keyup":case"keypress":case"mousedown":case"mouseup":if((e.type!=="keydown"||!u.unicode&&!u.textInput||e.keyCode===8||e.keyCode===9)&&e.preventDefault(),e.type=="mousedown")u.DOMButtons[e.button]=1,u.events.push({type:"touchstart",touch:{identifier:0,deviceID:-1,pageX:e.pageX,pageY:e.pageY}});else if(e.type=="mouseup"){if(!u.DOMButtons[e.button])return;u.events.push({type:"touchend",touch:{identifier:0,deviceID:-1,pageX:e.pageX,pageY:e.pageY}}),u.DOMButtons[e.button]=0}e.type==="keydown"||e.type==="mousedown"?u.canRequestFullscreen=!0:(e.type==="keyup"||e.type==="mouseup")&&(u.isRequestingFullscreen&&(f.requestFullscreen(!0,!0),u.isRequestingFullscreen=!1),u.canRequestFullscreen=!1),e.type==="keypress"&&u.savedKeydown?(u.savedKeydown.keypressCharCode=e.charCode,u.savedKeydown=null):e.type==="keydown"&&(u.savedKeydown=e),(e.type!=="keypress"||u.textInput)&&u.events.push(e);break;case"mouseout":for(var t=0;t<3;t++)u.DOMButtons[t]&&(u.events.push({type:"mouseup",button:t,pageX:e.pageX,pageY:e.pageY}),u.DOMButtons[t]=0);e.preventDefault();break;case"focus":u.events.push(e),e.preventDefault();break;case"blur":u.events.push(e),n(),e.preventDefault();break;case"visibilitychange":u.events.push({type:"visibilitychange",visible:!document.hidden}),n(),e.preventDefault();break;case"unload":m.mainLoop.runner&&(u.events.push(e),m.mainLoop.runner());return;case"resize":u.events.push(e),e.preventDefault&&e.preventDefault();break}u.events.length>=1e4&&(q("SDL event queue full, dropping events"),u.events=u.events.slice(0,1e4)),u.flushEventsToHandler()},lookupKeyCodeForEvent:function(e){var n=e.keyCode;return n>=65&&n<=90?n+=32:(n=u.keyCodes[e.keyCode]||e.keyCode,e.location===KeyboardEvent.DOM_KEY_LOCATION_RIGHT&&n>=1248&&n<=1251&&(n+=4)),n},handleEvent:function(e){if(!e.handled)switch(e.handled=!0,e.type){case"touchstart":case"touchend":case"touchmove":{m.calculateMouseEvent(e);break}case"keydown":case"keyup":{var n=e.type==="keydown",r=u.lookupKeyCodeForEvent(e);b[u.keyboardState+r>>0]=n,u.modState=(b[u.keyboardState+1248>>0]?64:0)|(b[u.keyboardState+1249>>0]?1:0)|(b[u.keyboardState+1250>>0]?256:0)|(b[u.keyboardState+1252>>0]?128:0)|(b[u.keyboardState+1253>>0]?2:0)|(b[u.keyboardState+1254>>0]?512:0),n?u.keyboardMap[r]=e.keyCode:delete u.keyboardMap[r];break}case"mousedown":case"mouseup":e.type=="mousedown"?u.buttonState|=1<<e.button:e.type=="mouseup"&&(u.buttonState&=~(1<<e.button));case"mousemove":{m.calculateMouseEvent(e);break}}},flushEventsToHandler:function(){if(u.eventHandler)for(;u.pollEvent(u.eventHandlerTemp);)f.dynCall_iii(u.eventHandler,u.eventHandlerContext,u.eventHandlerTemp)},pollEvent:function(e){if(u.initFlags&512&&u.joystickEventState&&u.queryJoysticks(),e){for(;u.events.length>0;)if(u.makeCEvent(u.events.shift(),e)!==!1)return 1;return 0}else return u.events.length>0},makeCEvent:function(e,n){if(typeof e=="number"){_o(n,e,28),fe(e);return}switch(u.handleEvent(e),e.type){case"keydown":case"keyup":{var r=e.type==="keydown",t=u.lookupKeyCodeForEvent(e),i;t>=1024?i=t-1024:i=u.scanCodes[t]||t,l[n>>2]=u.DOMEventToSDLEvent[e.type],b[n+8>>0]=r?1:0,b[n+9>>0]=0,l[n+12>>2]=i,l[n+16>>2]=t,G[n+20>>1]=u.modState,l[n+24>>2]=e.keypressCharCode||t;break}case"keypress":{l[n>>2]=u.DOMEventToSDLEvent[e.type];for(var a=ee(String.fromCharCode(e.charCode)),s=0;s<a.length;++s)b[n+(8+s)>>0]=a[s];break}case"mousedown":case"mouseup":case"mousemove":{if(e.type!="mousemove"){var r=e.type==="mousedown";l[n>>2]=u.DOMEventToSDLEvent[e.type],l[n+4>>2]=0,l[n+8>>2]=0,l[n+12>>2]=0,b[n+16>>0]=e.button+1,b[n+17>>0]=r?1:0,l[n+20>>2]=m.mouseX,l[n+24>>2]=m.mouseY}else l[n>>2]=u.DOMEventToSDLEvent[e.type],l[n+4>>2]=0,l[n+8>>2]=0,l[n+12>>2]=0,l[n+16>>2]=u.buttonState,l[n+20>>2]=m.mouseX,l[n+24>>2]=m.mouseY,l[n+28>>2]=m.mouseMovementX,l[n+32>>2]=m.mouseMovementY;break}case"wheel":{l[n>>2]=u.DOMEventToSDLEvent[e.type],l[n+16>>2]=e.deltaX,l[n+20>>2]=e.deltaY;break}case"touchstart":case"touchend":case"touchmove":{var c=e.touch;if(!m.touches[c.identifier])break;var d=f.canvas.width,v=f.canvas.height,h=m.touches[c.identifier].x/d,p=m.touches[c.identifier].y/v,g=m.lastTouches[c.identifier].x/d,_=m.lastTouches[c.identifier].y/v,k=h-g,R=p-_;if(c.deviceID===void 0&&(c.deviceID=u.TOUCH_DEFAULT_ID),k===0&&R===0&&e.type==="touchmove")return!1;l[n>>2]=u.DOMEventToSDLEvent[e.type],l[n+4>>2]=Pn(),N=[c.deviceID>>>0,(D=c.deviceID,+oe(D)>=1?D>0?(ue(+ae(D/4294967296),4294967295)|0)>>>0:~~+ie((D-+(~~D>>>0))/4294967296)>>>0:0)],l[n+8>>2]=N[0],l[n+12>>2]=N[1],N=[c.identifier>>>0,(D=c.identifier,+oe(D)>=1?D>0?(ue(+ae(D/4294967296),4294967295)|0)>>>0:~~+ie((D-+(~~D>>>0))/4294967296)>>>0:0)],l[n+16>>2]=N[0],l[n+20>>2]=N[1],re[n+24>>2]=h,re[n+28>>2]=p,re[n+32>>2]=k,re[n+36>>2]=R,c.force!==void 0?re[n+40>>2]=c.force:re[n+40>>2]=e.type=="touchend"?0:1;break}case"unload":{l[n>>2]=u.DOMEventToSDLEvent[e.type];break}case"resize":{l[n>>2]=u.DOMEventToSDLEvent[e.type],l[n+4>>2]=e.w,l[n+8>>2]=e.h;break}case"joystick_button_up":case"joystick_button_down":{var O=e.type==="joystick_button_up"?0:1;l[n>>2]=u.DOMEventToSDLEvent[e.type],b[n+4>>0]=e.index,b[n+5>>0]=e.button,b[n+6>>0]=O;break}case"joystick_axis_motion":{l[n>>2]=u.DOMEventToSDLEvent[e.type],b[n+4>>0]=e.index,b[n+5>>0]=e.axis,l[n+8>>2]=u.joystickAxisValueConversion(e.value);break}case"focus":{var B=12;l[n>>2]=u.DOMEventToSDLEvent[e.type],l[n+4>>2]=0,b[n+8>>0]=B;break}case"blur":{var y=13;l[n>>2]=u.DOMEventToSDLEvent[e.type],l[n+4>>2]=0,b[n+8>>0]=y;break}case"visibilitychange":{var E=1,T=2,F=e.visible?E:T;l[n>>2]=u.DOMEventToSDLEvent[e.type],l[n+4>>2]=0,b[n+8>>0]=F;break}default:throw"Unhandled SDL event: "+e.type}},makeFontString:function(e,n){return n.charAt(0)!="'"&&n.charAt(0)!='"'&&(n='"'+n+'"'),e+"px "+n+", serif"},estimateTextWidth:function(e,n){var r=e.size,t=u.makeFontString(r,e.name),i=u.ttfContext;i.font=t;var a=i.measureText(n).width|0;return a},allocateChannels:function(e){if(!(u.numChannels&&u.numChannels>=e&&e!=0)){u.numChannels=e,u.channels=[];for(var n=0;n<e;n++)u.channels[n]={audio:null,volume:1}}},setGetVolume:function(e,n){if(!e)return 0;var r=e.volume*128;if(n!=-1&&(e.volume=Math.min(Math.max(n,0),128)/128,e.audio))try{e.audio.volume=e.volume,e.audio.webAudioGainNode&&(e.audio.webAudioGainNode.gain.value=e.volume)}catch(t){q("setGetVolume failed to set audio volume: "+t)}return r},setPannerPosition:function(e,n,r,t){e&&e.audio&&e.audio.webAudioPannerNode&&e.audio.webAudioPannerNode.setPosition(n,r,t)},playWebAudio:function(e){if(e&&!e.webAudioNode&&u.webAudioAvailable())try{var n=e.resource.webAudio;if(e.paused=!1,!n.decodedBuffer){n.onDecodeComplete===void 0&&M("Cannot play back audio object that was not loaded"),n.onDecodeComplete.push(function(){e.paused||u.playWebAudio(e)});return}e.webAudioNode=u.audioContext.createBufferSource(),e.webAudioNode.buffer=n.decodedBuffer,e.webAudioNode.loop=e.loop,e.webAudioNode.onended=function(){e.onended()},e.webAudioPannerNode=u.audioContext.createPanner(),e.webAudioPannerNode.setPosition(0,0,-.5),e.webAudioPannerNode.panningModel="equalpower",e.webAudioGainNode=u.audioContext.createGain(),e.webAudioGainNode.gain.value=e.volume,e.webAudioNode.connect(e.webAudioPannerNode),e.webAudioPannerNode.connect(e.webAudioGainNode),e.webAudioGainNode.connect(u.audioContext.destination),e.webAudioNode.start(0,e.currentPosition),e.startTime=u.audioContext.currentTime-e.currentPosition}catch(r){q("playWebAudio failed: "+r)}},pauseWebAudio:function(e){if(e){if(e.webAudioNode)try{e.currentPosition=(u.audioContext.currentTime-e.startTime)%e.resource.webAudio.decodedBuffer.duration,e.webAudioNode.onended=void 0,e.webAudioNode.stop(0),e.webAudioNode=void 0}catch(n){q("pauseWebAudio failed: "+n)}e.paused=!0}},openAudioContext:function(){u.audioContext||(typeof AudioContext<"u"?u.audioContext=new AudioContext:typeof webkitAudioContext<"u"&&(u.audioContext=new webkitAudioContext))},webAudioAvailable:function(){return!!u.audioContext},fillWebAudioBufferFromHeap:function(e,n,r){for(var t=u.audio.channels,i=0;i<t;++i){var a=r.getChannelData(i);if(a.length!=n)throw"Web Audio output buffer length mismatch! Destination size: "+a.length+" samples vs expected "+n+" samples!";if(u.audio.format==32784)for(var s=0;s<n;++s)a[s]=G[e+(s*t+i)*2>>1]/32768;else if(u.audio.format==8)for(var s=0;s<n;++s){var c=b[e+(s*t+i)>>0];a[s]=(c>=0?c-128:c+128)/128}else if(u.audio.format==33056)for(var s=0;s<n;++s)a[s]=re[e+(s*t+i)*4>>2];else throw"Invalid SDL audio format "+u.audio.format+"!"}},debugSurface:function(e){console.log("dumping surface "+[e.surf,e.source,e.width,e.height]);for(var n=e.ctx.getImageData(0,0,e.width,e.height),r=n.data,t=Math.min(e.width,e.height),i=0;i<t;i++)console.log("   diagonal "+i+":"+[r[i*e.width*4+i*4+0],r[i*e.width*4+i*4+1],r[i*e.width*4+i*4+2],r[i*e.width*4+i*4+3]])},joystickEventState:1,lastJoystickState:{},joystickNamePool:{},recordJoystickState:function(e,n){for(var r=new Array(n.buttons.length),t=0;t<n.buttons.length;t++)r[t]=u.getJoystickButtonState(n.buttons[t]);u.lastJoystickState[e]={buttons:r,axes:n.axes.slice(0),timestamp:n.timestamp,index:n.index,id:n.id}},getJoystickButtonState:function(e){return typeof e=="object"?e.pressed:e>0},queryJoysticks:function(){for(var e in u.lastJoystickState){var n=u.getGamepad(e-1),r=u.lastJoystickState[e];if(typeof n>"u"||n===null)return;if(typeof n.timestamp!="number"||n.timestamp!==r.timestamp||!n.timestamp){var t;for(t=0;t<n.buttons.length;t++){var i=u.getJoystickButtonState(n.buttons[t]);i!==r.buttons[t]&&u.events.push({type:i?"joystick_button_down":"joystick_button_up",joystick:e,index:e-1,button:t})}for(t=0;t<n.axes.length;t++)n.axes[t]!==r.axes[t]&&u.events.push({type:"joystick_axis_motion",joystick:e,index:e-1,axis:t,value:n.axes[t]});u.recordJoystickState(e,n)}}},joystickAxisValueConversion:function(e){return e=Math.min(1,Math.max(e,-1)),Math.ceil((e+1)*32767.5-32768)},getGamepads:function(){var e=navigator.getGamepads||navigator.webkitGamepads||navigator.mozGamepads||navigator.gamepads||navigator.webkitGetGamepads;return e!==void 0?e.apply(navigator):[]},getGamepad:function(e){var n=u.getGamepads();return n.length>e&&e>=0?n[e]:null}};function Bn(e){u.audio&&(e?u.audio.timer!==void 0&&(clearTimeout(u.audio.timer),u.audio.numAudioTimersPending=0,u.audio.timer=void 0):u.audio.timer||(u.audio.numAudioTimersPending=1,u.audio.timer=m.safeSetTimeout(u.audio.caller,1)),u.audio.paused=e)}function Lr(){u.audio&&(Bn(1),fe(u.audio.buffer),u.audio=null,u.allocateChannels(0))}function Ar(e,n,r,t,i,a,s,c){return u.makeSurface(n,r,e,!1,"CreateRGBSurface",i,a,s,c)}function xr(e){A.handleSleep(function(n){m.safeSetTimeout(n,e)})}function Fr(e){xr(e)}function Mr(e,n,r){var t=u.surfaces[e];H(!t.locked),t.isFlagSet(2097152)&&(r=t.colors32[r]);var i=n?u.loadRect(n):{x:0,y:0,w:t.width,h:t.height};return t.clipRect&&(i=u.intersectionOfRects(t.clipRect,i),n&&u.updateRect(n,i)),t.ctx.save(),t.ctx.fillStyle=u.translateColorToCSSRGBA(r),t.ctx.fillRect(i.x,i.y,i.w,i.h),t.ctx.restore(),0}function Tr(e){}function Cr(e){e&&u.freeSurface(e)}function Rr(){return u.errorMessage||(u.errorMessage=Re(ee("unknown SDL-emscripten error"),"i8",Ce)),u.errorMessage}function Pr(e){return u.keyName||(u.keyName=Re(ee("unknown key"),"i8",Ce)),u.keyName}function Or(){return u.modState}function Br(){var e=Y(20);return l[e+0>>2]=0,l[e+4>>2]=0,l[e+8>>2]=0,l[e+12>>2]=f.canvas.width,l[e+16>>2]=f.canvas.height,e}function Nr(e){if(u.startTime=Date.now(),u.initFlags=e,!f.doNotCaptureKeyboard){var n=f.keyboardListeningElement||document;n.addEventListener("keydown",u.receiveEvent),n.addEventListener("keyup",u.receiveEvent),n.addEventListener("keypress",u.receiveEvent),window.addEventListener("focus",u.receiveEvent),window.addEventListener("blur",u.receiveEvent),document.addEventListener("visibilitychange",u.receiveEvent)}return window.addEventListener("unload",u.receiveEvent),u.keyboardState=Y(65536),wo(u.keyboardState,0,65536),u.DOMEventToSDLEvent.keydown=768,u.DOMEventToSDLEvent.keyup=769,u.DOMEventToSDLEvent.keypress=771,u.DOMEventToSDLEvent.mousedown=1025,u.DOMEventToSDLEvent.mouseup=1026,u.DOMEventToSDLEvent.mousemove=1024,u.DOMEventToSDLEvent.wheel=1027,u.DOMEventToSDLEvent.touchstart=1792,u.DOMEventToSDLEvent.touchend=1793,u.DOMEventToSDLEvent.touchmove=1794,u.DOMEventToSDLEvent.unload=256,u.DOMEventToSDLEvent.resize=28673,u.DOMEventToSDLEvent.visibilitychange=512,u.DOMEventToSDLEvent.focus=512,u.DOMEventToSDLEvent.blur=512,u.DOMEventToSDLEvent.joystick_axis_motion=1536,u.DOMEventToSDLEvent.joystick_button_down=1539,u.DOMEventToSDLEvent.joystick_button_up=1540,0}function zr(e){return 0}function qr(e){delete u.lastJoystickState[e]}function Ir(e){return e<0?u.joystickEventState:u.joystickEventState=e}function Ur(e,n){var r=u.getGamepad(e-1);return r&&r.axes.length>n?u.joystickAxisValueConversion(r.axes[n]):0}function Yr(e,n){var r=u.getGamepad(e-1);return r&&r.buttons.length>n&&u.getJoystickButtonState(r.buttons[n])?1:0}function jr(e,n){return 0}function Hr(e){var n=u.getGamepad(e);if(n){var r=n.id;return u.joystickNamePool.hasOwnProperty(r)?u.joystickNamePool[r]:u.joystickNamePool[r]=Re(ee(r),"i8",Ce)}return 0}function Gr(e){var n=u.getGamepad(e-1);return n?n.axes.length:0}function Xr(e){var n=u.getGamepad(e-1);return n?n.buttons.length:0}function Wr(e){return 0}function Vr(e){var n=u.getGamepad(e);if(n){var r=e+1;return u.recordJoystickState(r,n),r}return 0}function Kr(){u.queryJoysticks()}function Jr(){}function Zr(e,n,r,t){return u.checkPixelFormat(e),n&255|(r&255)<<8|(t&255)<<16|4278190080}function Qr(){for(var e=0,n=u.getGamepads(),r=0;r<n.length;r++)n[r]!==void 0&&e++;return e}function $r(e,n){try{if(u.audio={freq:ke[e>>2],format:tn[e+4>>1],channels:I[e+6>>0],samples:tn[e+8>>1],callback:ke[e+16>>2],userdata:ke[e+20>>2],paused:!0,timer:null},u.audio.format==8)u.audio.silence=128;else if(u.audio.format==32784)u.audio.silence=0;else if(u.audio.format==33056)u.audio.silence=0;else throw"Invalid SDL audio format "+u.audio.format+"!";if(u.audio.freq<=0)throw"Unsupported sound frequency "+u.audio.freq+"!";if(u.audio.freq<=22050)u.audio.freq=22050;else if(u.audio.freq<=32e3)u.audio.freq=32e3;else if(u.audio.freq<=44100)u.audio.freq=44100;else if(u.audio.freq<=48e3)u.audio.freq=48e3;else if(u.audio.freq<=96e3)u.audio.freq=96e3;else throw"Unsupported sound frequency "+u.audio.freq+"!";if(u.audio.channels==0)u.audio.channels=1;else{if(u.audio.channels<0||u.audio.channels>32)throw"Unsupported number of audio channels for SDL audio: "+u.audio.channels+"!";u.audio.channels!=1&&u.audio.channels!=2&&console.log("Warning: Using untested number of audio channels "+u.audio.channels)}if(u.audio.samples<128||u.audio.samples>524288)throw"Unsupported audio callback buffer size "+u.audio.samples+"!";if(u.audio.samples&u.audio.samples-1)throw"Audio callback buffer size "+u.audio.samples+" must be a power-of-two!";var r=u.audio.samples*u.audio.channels;if(u.audio.format==8)u.audio.bytesPerSample=1;else if(u.audio.format==32784)u.audio.bytesPerSample=2;else if(u.audio.format==33056)u.audio.bytesPerSample=4;else throw"Invalid SDL audio format "+u.audio.format+"!";if(u.audio.bufferSize=r*u.audio.bytesPerSample,u.audio.bufferDurationSecs=u.audio.bufferSize/u.audio.bytesPerSample/u.audio.channels/u.audio.freq,u.audio.bufferingDelay=.05,u.audio.buffer=Y(u.audio.bufferSize),u.audio.numSimultaneouslyQueuedBuffers=f.SDL_numSimultaneouslyQueuedBuffers||5,u.audio.queueNewAudioData=function(){if(u.audio)for(var i=0;i<u.audio.numSimultaneouslyQueuedBuffers;++i){var a=u.audio.nextPlayTime-u.audioContext.currentTime;if(a>=u.audio.bufferingDelay+u.audio.bufferDurationSecs*u.audio.numSimultaneouslyQueuedBuffers)return;xo(u.audio.callback,u.audio.userdata,u.audio.buffer,u.audio.bufferSize),u.audio.pushAudio(u.audio.buffer,u.audio.bufferSize)}},u.audio.caller=function(){if(u.audio){--u.audio.numAudioTimersPending,u.audio.queueNewAudioData();var i=u.audio.nextPlayTime-u.audioContext.currentTime,a=u.audio.bufferDurationSecs/2;u.audio.numAudioTimersPending<u.audio.numSimultaneouslyQueuedBuffers&&(++u.audio.numAudioTimersPending,u.audio.timer=m.safeSetTimeout(u.audio.caller,Math.max(0,1e3*(i-a))),u.audio.numAudioTimersPending<u.audio.numSimultaneouslyQueuedBuffers&&(++u.audio.numAudioTimersPending,m.safeSetTimeout(u.audio.caller,1)))}},u.audio.audioOutput=new Audio,u.openAudioContext(),!u.audioContext)throw"Web Audio API is not available!";u.audio.nextPlayTime=0,u.audio.pushAudio=function(t,i){try{if(u.audio.paused)return;var a=i/u.audio.bytesPerSample,s=a/u.audio.channels;if(s!=u.audio.samples)throw"Received mismatching audio buffer size!";var c=u.audioContext.createBufferSource(),d=u.audioContext.createBuffer(u.audio.channels,s,u.audio.freq);c.connect(u.audioContext.destination),u.fillWebAudioBufferFromHeap(t,s,d),c.buffer=d;var v=u.audioContext.currentTime,h=Math.max(v+u.audio.bufferingDelay,u.audio.nextPlayTime);typeof c.start<"u"?c.start(h):typeof c.noteOn<"u"&&c.noteOn(h),u.audio.nextPlayTime=h+u.audio.bufferDurationSecs}catch(p){console.log("Web Audio API error playing back audio: "+p.toString())}},n&&(l[n>>2]=u.audio.freq,G[n+4>>1]=u.audio.format,b[n+6>>0]=u.audio.channels,b[n+7>>0]=u.audio.silence,G[n+8>>1]=u.audio.samples,l[n+16>>2]=u.audio.callback,l[n+20>>2]=u.audio.userdata),u.allocateChannels(32)}catch(t){console.log('Initializing SDL audio threw an exception: "'+t.toString()+'"! Continuing without audio.'),u.audio=null,u.allocateChannels(0),n&&(l[n>>2]=0,G[n+4>>1]=0,b[n+6>>0]=0,b[n+7>>0]=0,G[n+8>>1]=0,l[n+16>>2]=0,l[n+20>>2]=0)}return u.audio?0:-1}function et(e){return u.pollEvent(e)}function nt(){for(var e=0;e<u.numChannels;++e)u.channels[e].audio&&(u.channels[e].audio.pause(),u.channels[e].audio=void 0);u.music.audio&&u.music.audio.pause(),u.music.audio=void 0}function rt(){nt(),Ue("SDL_Quit called (and ignored)")}function tt(e,n,r){var t=u.surfaces[e];t.alpha=r,n&65536||(t.alpha=255)}function ot(e,n,r,t){var i=u.surfaces[e];if(!i.colors){var a=new ArrayBuffer(1024);i.colors=new Uint8Array(a),i.colors32=new Uint32Array(a)}for(var s=0;s<t;++s){var c=(r+s)*4;i.colors[c]=I[n+s*4>>0],i.colors[c+1]=I[n+(s*4+1)>>0],i.colors[c+2]=I[n+(s*4+2)>>0],i.colors[c+3]=255}return 1}function it(e,n,r,t,i){return ot(e,r,t,i)}var x={counter:1,lastError:0,buffers:[],mappedBuffers:{},programs:[],framebuffers:[],renderbuffers:[],textures:[],uniforms:[],shaders:[],vaos:[],contexts:{},currentContext:null,offscreenCanvases:{},timerQueriesEXT:[],programInfos:{},stringCache:{},unpackAlignment:4,init:function(){x.miniTempBuffer=new Float32Array(x.MINI_TEMP_BUFFER_SIZE);for(var e=0;e<x.MINI_TEMP_BUFFER_SIZE;e++)x.miniTempBufferViews[e]=x.miniTempBuffer.subarray(0,e+1)},recordError:function(n){x.lastError||(x.lastError=n)},getNewId:function(e){for(var n=x.counter++,r=e.length;r<n;r++)e[r]=null;return n},MINI_TEMP_BUFFER_SIZE:256,miniTempBuffer:null,miniTempBufferViews:[0],getSource:function(e,n,r,t){for(var i="",a=0;a<n;++a){var s=t?l[t+a*4>>2]:-1;i+=U(l[r+a*4>>2],s<0?void 0:s)}return i},createContext:function(e,n){var r=e.getContext("webgl",n)||e.getContext("experimental-webgl",n);if(!r)return 0;var t=x.registerContext(r,n);return t},registerContext:function(e,n){var r=Y(8),t={handle:r,attributes:n,version:n.majorVersion,GLctx:e};return e.canvas&&(e.canvas.GLctxObject=t),x.contexts[r]=t,(typeof n.enableExtensionsByDefault>"u"||n.enableExtensionsByDefault)&&x.initExtensions(t),r},makeContextCurrent:function(e){return x.currentContext=x.contexts[e],f.ctx=ge=x.currentContext&&x.currentContext.GLctx,!(e&&!ge)},getContext:function(e){return x.contexts[e]},deleteContext:function(e){x.currentContext===x.contexts[e]&&(x.currentContext=null),typeof S=="object"&&S.removeAllHandlersOnTarget(x.contexts[e].GLctx.canvas),x.contexts[e]&&x.contexts[e].GLctx.canvas&&(x.contexts[e].GLctx.canvas.GLctxObject=void 0),fe(x.contexts[e]),x.contexts[e]=null},acquireInstancedArraysExtension:function(e){var n=e.getExtension("ANGLE_instanced_arrays");n&&(e.vertexAttribDivisor=function(r,t){n.vertexAttribDivisorANGLE(r,t)},e.drawArraysInstanced=function(r,t,i,a){n.drawArraysInstancedANGLE(r,t,i,a)},e.drawElementsInstanced=function(r,t,i,a,s){n.drawElementsInstancedANGLE(r,t,i,a,s)})},acquireVertexArrayObjectExtension:function(e){var n=e.getExtension("OES_vertex_array_object");n&&(e.createVertexArray=function(){return n.createVertexArrayOES()},e.deleteVertexArray=function(r){n.deleteVertexArrayOES(r)},e.bindVertexArray=function(r){n.bindVertexArrayOES(r)},e.isVertexArray=function(r){return n.isVertexArrayOES(r)})},acquireDrawBuffersExtension:function(e){var n=e.getExtension("WEBGL_draw_buffers");n&&(e.drawBuffers=function(r,t){n.drawBuffersWEBGL(r,t)})},initExtensions:function(e){if(e||(e=x.currentContext),!e.initExtensionsDone){e.initExtensionsDone=!0;var n=e.GLctx;e.version<2&&(x.acquireInstancedArraysExtension(n),x.acquireVertexArrayObjectExtension(n),x.acquireDrawBuffersExtension(n)),n.disjointTimerQueryExt=n.getExtension("EXT_disjoint_timer_query");var r=["OES_texture_float","OES_texture_half_float","OES_standard_derivatives","OES_vertex_array_object","WEBGL_compressed_texture_s3tc","WEBGL_depth_texture","OES_element_index_uint","EXT_texture_filter_anisotropic","EXT_frag_depth","WEBGL_draw_buffers","ANGLE_instanced_arrays","OES_texture_float_linear","OES_texture_half_float_linear","EXT_blend_minmax","EXT_shader_texture_lod","WEBGL_compressed_texture_pvrtc","EXT_color_buffer_half_float","WEBGL_color_buffer_float","EXT_sRGB","WEBGL_compressed_texture_etc1","EXT_disjoint_timer_query","WEBGL_compressed_texture_etc","WEBGL_compressed_texture_astc","EXT_color_buffer_float","WEBGL_compressed_texture_s3tc_srgb","EXT_disjoint_timer_query_webgl2","WEBKIT_WEBGL_compressed_texture_pvrtc"],t=n.getSupportedExtensions()||[];t.forEach(function(i){r.indexOf(i)!=-1&&n.getExtension(i)})}},populateUniformTable:function(e){for(var n=x.programs[e],r=x.programInfos[e]={uniforms:{},maxUniformLength:0,maxAttributeLength:-1,maxUniformBlockNameLength:-1},t=r.uniforms,i=ge.getProgramParameter(n,35718),a=0;a<i;++a){var s=ge.getActiveUniform(n,a),c=s.name;r.maxUniformLength=Math.max(r.maxUniformLength,c.length+1),c.slice(-1)=="]"&&(c=c.slice(0,c.lastIndexOf("[")));var d=ge.getUniformLocation(n,c);if(d){var v=x.getNewId(x.uniforms);t[c]=[s.size,v],x.uniforms[v]=d;for(var h=1;h<s.size;++h){var p=c+"["+h+"]";d=ge.getUniformLocation(n,p),v=x.getNewId(x.uniforms),x.uniforms[v]=d}}}}};function at(e,n,r,t){["touchstart","touchend","touchmove","mousedown","mouseup","mousemove","DOMMouseScroll","mousewheel","wheel","mouseout"].forEach(function(a){f.canvas.addEventListener(a,u.receiveEvent,!0)});var i=f.canvas;return e==0&&n==0&&(e=i.width,n=i.height),u.addedResizeListener||(u.addedResizeListener=!0,m.resizeListeners.push(function(a,s){u.settingVideoMode||u.receiveEvent({type:"resize",w:a,h:s})})),u.settingVideoMode=!0,m.setCanvasSize(e,n),u.settingVideoMode=!1,u.screen&&(u.freeSurface(u.screen),H(!u.screen)),u.GL&&(t=t|67108864),u.screen=u.makeSurface(e,n,t,!0,"screen"),u.screen}function ut(e){switch(e){case 0:return m.isFullscreen?(f.canvas.requestPointerLock(),0):1;case 1:return f.canvas.exitPointerLock(),1;case-1:return!m.pointerLock;default:console.log("SDL_ShowCursor called with unknown toggle parameter value: "+e+".");break}}function st(){}function ft(e){H(!u.GL);var n=u.surfaces[e];if(!(!n.locked||--n.locked>0)){if(n.isFlagSet(2097152))u.copyIndexedColorData(n);else if(n.colors)for(var _=f.canvas.width,k=f.canvas.height,R=n.buffer,r=n.image.data,O=n.colors,B=0;B<k;B++){for(var y=B*_*4,E=0;E<_;E++){var d=I[R++>>0]*4,T=y+E*4;r[T]=O[d],r[T+1]=O[d+1],r[T+2]=O[d+2]}R+=_*3}else{var r=n.image.data,t=n.buffer;H(t%4==0,"Invalid buffer offset: "+t);var i=t>>2,a=0,s=e==u.screen,c;if(typeof CanvasPixelArray<"u"&&r instanceof CanvasPixelArray)for(c=r.length;a<c;){var d=l[i];r[a]=d&255,r[a+1]=d>>8&255,r[a+2]=d>>16&255,r[a+3]=s?255:d>>24&255,i++,a+=4}else{var v=new Uint32Array(r.buffer);if(s&&u.defaults.opaqueFrontBuffer){c=v.length,v.set(l.subarray(i,i+c));var h=new Uint8Array(r.buffer),p=3,g=p+4*c;if(c%8==0)for(;p<g;)h[p]=255,p=p+4|0,h[p]=255,p=p+4|0,h[p]=255,p=p+4|0,h[p]=255,p=p+4|0,h[p]=255,p=p+4|0,h[p]=255,p=p+4|0,h[p]=255,p=p+4|0,h[p]=255,p=p+4|0;else for(;p<g;)h[p]=255,p=p+4|0}else v.set(l.subarray(i,i+v.length))}}n.ctx.putImageData(n.image,0,0)}}function ct(e,n,r,t){return u.blitSurface(e,n,r,t,!1)}function lt(e,n,r,t){return r}function dt(){}function mt(e,n){e&&typeof nn<"u"&&nn(U(e)),n=n&&U(n)}function vt(){q("missing function: SDL_WaitEvent"),M(-1)}function pt(e,n,r,t){M("Assertion failed: "+U(e)+", at: "+[n?U(n):"unknown filename",r,t?U(t):"unknown function"])}function ht(e){return Y(e)}function gt(e,n,r){throw"uncaught_exception"in cn?cn.uncaught_exceptions++:cn.uncaught_exceptions=1,e}function yt(){}function _t(e,n){return ve(63),-1}var w={DEFAULT_POLLMASK:5,mappings:{},umask:511,calculateAt:function(e,n){if(n[0]!=="/"){var r;if(e===-100)r=o.cwd();else{var t=o.getStream(e);if(!t)throw new o.ErrnoError(8);r=t.path}n=C.join2(r,n)}return n},doStat:function(e,n,r){try{var t=e(n)}catch(i){if(i&&i.node&&C.normalize(n)!==C.normalize(o.getPath(i.node)))return-54;throw i}return l[r>>2]=t.dev,l[r+4>>2]=0,l[r+8>>2]=t.ino,l[r+12>>2]=t.mode,l[r+16>>2]=t.nlink,l[r+20>>2]=t.uid,l[r+24>>2]=t.gid,l[r+28>>2]=t.rdev,l[r+32>>2]=0,N=[t.size>>>0,(D=t.size,+oe(D)>=1?D>0?(ue(+ae(D/4294967296),4294967295)|0)>>>0:~~+ie((D-+(~~D>>>0))/4294967296)>>>0:0)],l[r+40>>2]=N[0],l[r+44>>2]=N[1],l[r+48>>2]=4096,l[r+52>>2]=t.blocks,l[r+56>>2]=t.atime.getTime()/1e3|0,l[r+60>>2]=0,l[r+64>>2]=t.mtime.getTime()/1e3|0,l[r+68>>2]=0,l[r+72>>2]=t.ctime.getTime()/1e3|0,l[r+76>>2]=0,N=[t.ino>>>0,(D=t.ino,+oe(D)>=1?D>0?(ue(+ae(D/4294967296),4294967295)|0)>>>0:~~+ie((D-+(~~D>>>0))/4294967296)>>>0:0)],l[r+80>>2]=N[0],l[r+84>>2]=N[1],0},doMsync:function(e,n,r,t){var i=new Uint8Array(I.subarray(e,e+r));o.msync(n,i,0,r,t)},doMkdir:function(e,n){return e=C.normalize(e),e[e.length-1]==="/"&&(e=e.substr(0,e.length-1)),o.mkdir(e,n,0),0},doMknod:function(e,n,r){switch(n&61440){case 32768:case 8192:case 24576:case 4096:case 49152:break;default:return-28}return o.mknod(e,n,r),0},doReadlink:function(e,n,r){if(r<=0)return-28;var t=o.readlink(e),i=Math.min(r,Ee(t)),a=b[n+i];return de(t,n,r+1),b[n+i]=a,i},doAccess:function(e,n){if(n&-8)return-28;var r,t=o.lookupPath(e,{follow:!0});if(r=t.node,!r)return-44;var i="";return n&4&&(i+="r"),n&2&&(i+="w"),n&1&&(i+="x"),i&&o.nodePermissions(r,i)?-2:0},doDup:function(e,n,r){var t=o.getStream(r);return t&&o.close(t),o.open(e,n,0,r,r).fd},doReadv:function(e,n,r,t){for(var i=0,a=0;a<r;a++){var s=l[n+a*8>>2],c=l[n+(a*8+4)>>2],d=o.read(e,b,s,c,t);if(d<0)return-1;if(i+=d,d<c)break}return i},doWritev:function(e,n,r,t){for(var i=0,a=0;a<r;a++){var s=l[n+a*8>>2],c=l[n+(a*8+4)>>2],d=o.write(e,b,s,c,t);if(d<0)return-1;i+=d}return i},varargs:0,get:function(e){w.varargs+=4;var n=l[w.varargs-4>>2];return n},getStr:function(){var e=U(w.get());return e},getStreamFromFD:function(e){e===void 0&&(e=w.get());var n=o.getStream(e);if(!n)throw new o.ErrnoError(8);return n},get64:function(){var e=w.get();return w.get(),e},getZero:function(){w.get()}};function wt(e,n){w.varargs=n;try{var r=w.getStr();return o.unlink(r),0}catch(t){return(typeof o>"u"||!(t instanceof o.ErrnoError))&&M(t),-t.errno}}function Et(e,n){w.varargs=n;try{var r=w.getStr(),t=w.get();return o.chmod(r,t),0}catch(i){return(typeof o>"u"||!(i instanceof o.ErrnoError))&&M(i),-i.errno}}function kt(e,n){w.varargs=n;try{var r=w.get(),t=w.get();if(t===0)return-28;var i=o.cwd(),a=Ee(i);return t<a+1?-68:(de(i,r,t),r)}catch(s){return(typeof o>"u"||!(s instanceof o.ErrnoError))&&M(s),-s.errno}}function bt(e,n){w.varargs=n;try{var r=w.get(),t=w.getZero(),i=w.get64();return o.ftruncate(r,i),0}catch(a){return(typeof o>"u"||!(a instanceof o.ErrnoError))&&M(a),-a.errno}}function St(e,n){w.varargs=n;try{var r=w.getStr(),t=w.get();return w.doStat(o.stat,r,t)}catch(i){return(typeof o>"u"||!(i instanceof o.ErrnoError))&&M(i),-i.errno}}function Dt(e,n){w.varargs=n;try{var r=w.getStreamFromFD(),t=w.get();return w.doStat(o.stat,r.path,t)}catch(i){return(typeof o>"u"||!(i instanceof o.ErrnoError))&&M(i),-i.errno}}var Lt={ppid:1,pid:42,sid:42,pgid:42};function At(e,n){w.varargs=n;try{return Lt.pid}catch(r){return(typeof o>"u"||!(r instanceof o.ErrnoError))&&M(r),-r.errno}}function xt(e,n){w.varargs=n;try{var r=w.getStreamFromFD(),t=w.get(),i=w.get();r.getdents||(r.getdents=o.readdir(r.path));for(var a=280,s=0,c=o.llseek(r,0,1),d=Math.floor(c/a);d<r.getdents.length&&s+a<=i;){var v,h,p=r.getdents[d];if(p[0]===".")v=1,h=4;else{var g=o.lookupNode(r.node,p);v=g.id,h=o.isChrdev(g.mode)?2:o.isDir(g.mode)?4:o.isLink(g.mode)?10:8}N=[v>>>0,(D=v,+oe(D)>=1?D>0?(ue(+ae(D/4294967296),4294967295)|0)>>>0:~~+ie((D-+(~~D>>>0))/4294967296)>>>0:0)],l[t+s>>2]=N[0],l[t+s+4>>2]=N[1],N=[(d+1)*a>>>0,(D=(d+1)*a,+oe(D)>=1?D>0?(ue(+ae(D/4294967296),4294967295)|0)>>>0:~~+ie((D-+(~~D>>>0))/4294967296)>>>0:0)],l[t+s+8>>2]=N[0],l[t+s+12>>2]=N[1],G[t+s+16>>1]=280,b[t+s+18>>0]=h,de(p,t+s+19,256),s+=a,d+=1}return o.llseek(r,d*a,0),s}catch(_){return(typeof o>"u"||!(_ instanceof o.ErrnoError))&&M(_),-_.errno}}function Ft(e,n){w.varargs=n;try{var r=w.getStreamFromFD(),t=w.get();switch(t){case 0:{var i=w.get();if(i<0)return-28;var a;return a=o.open(r.path,r.flags,0,i),a.fd}case 1:case 2:return 0;case 3:return r.flags;case 4:{var i=w.get();return r.flags|=i,0}case 12:{var i=w.get(),s=0;return G[i+s>>1]=2,0}case 13:case 14:return 0;case 16:case 8:return-28;case 9:return ve(28),-1;default:return-28}}catch(c){return(typeof o>"u"||!(c instanceof o.ErrnoError))&&M(c),-c.errno}}function Mt(e,n){w.varargs=n;try{var r=w.getStr(),t=w.get();return w.doAccess(r,t)}catch(i){return(typeof o>"u"||!(i instanceof o.ErrnoError))&&M(i),-i.errno}}function Tt(e,n){w.varargs=n;try{var r=w.getStr(),t=w.getStr();return o.rename(r,t),0}catch(i){return(typeof o>"u"||!(i instanceof o.ErrnoError))&&M(i),-i.errno}}function Ct(e,n){w.varargs=n;try{var r=w.getStr(),t=w.get();return w.doMkdir(r,t)}catch(i){return(typeof o>"u"||!(i instanceof o.ErrnoError))&&M(i),-i.errno}}function Rt(e,n){w.varargs=n;try{var r=w.getStreamFromFD(),t=w.get(),i=w.get();return o.write(r,b,t,i)}catch(a){return(typeof o>"u"||!(a instanceof o.ErrnoError))&&M(a),-a.errno}}function Pt(e,n){w.varargs=n;try{var r=w.getStr();return o.rmdir(r),0}catch(t){return(typeof o>"u"||!(t instanceof o.ErrnoError))&&M(t),-t.errno}}function Ot(e,n){w.varargs=n;try{var r=w.getStr(),t=w.get(),i=w.get(),a=o.open(r,t,i);return a.fd}catch(s){return(typeof o>"u"||!(s instanceof o.ErrnoError))&&M(s),-s.errno}}function Bt(e,n){w.varargs=n;try{var r=w.getStreamFromFD(),t=w.get();switch(t){case 21509:case 21505:return r.tty?0:-59;case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:return r.tty?0:-59;case 21519:{if(!r.tty)return-59;var i=w.get();return l[i>>2]=0,0}case 21520:return r.tty?-28:-59;case 21531:{var i=w.get();return o.ioctl(r,t,i)}case 21523:return r.tty?0:-59;case 21524:return r.tty?0:-59;default:M("bad ioctl syscall "+t)}}catch(a){return(typeof o>"u"||!(a instanceof o.ErrnoError))&&M(a),-a.errno}}function Nt(e,n){w.varargs=n;try{var r=w.get(),t=w.umask;return w.umask=r,t}catch(i){return(typeof o>"u"||!(i instanceof o.ErrnoError))&&M(i),-i.errno}}function zt(e,n){if(e===-1||n===0)return-28;var r=w.mappings[e];if(!r)return 0;if(n===r.len){var t=o.getStream(r.fd);w.doMsync(e,t,n,r.flags),o.munmap(t),w.mappings[e]=null,r.allocated&&fe(r.malloc)}return 0}function qt(e,n){w.varargs=n;try{var r=w.get(),t=w.get();return zt(r,t)}catch(i){return(typeof o>"u"||!(i instanceof o.ErrnoError))&&M(i),-i.errno}}function It(){}function Ut(){M()}function Yt(){return ce||typeof dateNow<"u"||typeof performance=="object"&&performance&&typeof performance.now=="function"}function jt(e,n){var r;if(e===0)r=Date.now();else if(e===1&&Yt())r=he();else return ve(28),-1;return l[n>>2]=r/1e3|0,l[n+4>>2]=r%1e3*1e3*1e3|0,0}function Ht(){m.mainLoop.pause(),m.mainLoop.func=null}var S={keyEvent:0,mouseEvent:0,wheelEvent:0,uiEvent:0,focusEvent:0,deviceOrientationEvent:0,deviceMotionEvent:0,fullscreenChangeEvent:0,pointerlockChangeEvent:0,visibilityChangeEvent:0,touchEvent:0,previousFullscreenElement:null,previousScreenX:null,previousScreenY:null,removeEventListenersRegistered:!1,removeAllEventListeners:function(){for(var e=S.eventHandlers.length-1;e>=0;--e)S._removeHandler(e);S.eventHandlers=[],S.deferredCalls=[]},registerRemoveEventListeners:function(){S.removeEventListenersRegistered||(fr.push(S.removeAllEventListeners),S.removeEventListenersRegistered=!0)},deferredCalls:[],deferCall:function(e,n,r){function t(s,c){if(s.length!=c.length)return!1;for(var d in s)if(s[d]!=c[d])return!1;return!0}for(var i in S.deferredCalls){var a=S.deferredCalls[i];if(a.targetFunction==e&&t(a.argsList,r))return}S.deferredCalls.push({targetFunction:e,precedence:n,argsList:r}),S.deferredCalls.sort(function(s,c){return s.precedence<c.precedence})},removeDeferredCalls:function(e){for(var n=0;n<S.deferredCalls.length;++n)S.deferredCalls[n].targetFunction==e&&(S.deferredCalls.splice(n,1),--n)},canPerformEventHandlerRequests:function(){return S.inEventHandler&&S.currentEventHandler.allowsDeferredCalls},runDeferredCalls:function(){if(S.canPerformEventHandlerRequests())for(var e=0;e<S.deferredCalls.length;++e){var n=S.deferredCalls[e];S.deferredCalls.splice(e,1),--e,n.targetFunction.apply(this,n.argsList)}},inEventHandler:0,currentEventHandler:null,eventHandlers:[],isInternetExplorer:function(){return navigator.userAgent.indexOf("MSIE")!==-1||navigator.appVersion.indexOf("Trident/")>0},removeAllHandlersOnTarget:function(e,n){for(var r=0;r<S.eventHandlers.length;++r)S.eventHandlers[r].target==e&&(!n||n==S.eventHandlers[r].eventTypeString)&&S._removeHandler(r--)},_removeHandler:function(e){var n=S.eventHandlers[e];n.target.removeEventListener(n.eventTypeString,n.eventListenerFunc,n.useCapture),S.eventHandlers.splice(e,1)},registerOrRemoveHandler:function(e){var n=function(i){++S.inEventHandler,S.currentEventHandler=e,S.runDeferredCalls(),e.handlerFunc(i),S.runDeferredCalls(),--S.inEventHandler};if(e.callbackfunc)e.eventListenerFunc=n,e.target.addEventListener(e.eventTypeString,n,e.useCapture),S.eventHandlers.push(e),S.registerRemoveEventListeners();else for(var r=0;r<S.eventHandlers.length;++r)S.eventHandlers[r].target==e.target&&S.eventHandlers[r].eventTypeString==e.eventTypeString&&S._removeHandler(r--)},getBoundingClientRectOrZeros:function(e){return e.getBoundingClientRect?e.getBoundingClientRect():{left:0,top:0}},getNodeNameForTarget:function(e){return e?e==window?"#window":e==screen?"#screen":e&&e.nodeName?e.nodeName:"":""},tick:function(){return window.performance&&window.performance.now?window.performance.now():Date.now()},fullscreenEnabled:function(){return document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled||document.msFullscreenEnabled}};function un(e){if(e.requestPointerLock)e.requestPointerLock();else if(e.mozRequestPointerLock)e.mozRequestPointerLock();else if(e.webkitRequestPointerLock)e.webkitRequestPointerLock();else if(e.msRequestPointerLock)e.msRequestPointerLock();else return document.body.requestPointerLock||document.body.mozRequestPointerLock||document.body.webkitRequestPointerLock||document.body.msRequestPointerLock?-3:-1;return 0}function Gt(){if(S.removeDeferredCalls(un),document.exitPointerLock)document.exitPointerLock();else if(document.msExitPointerLock)document.msExitPointerLock();else if(document.mozExitPointerLock)document.mozExitPointerLock();else if(document.webkitExitPointerLock)document.webkitExitPointerLock();else return-1;return 0}function Xt(){q("missing function: emscripten_fetch"),M(-1)}function Wt(){q("missing function: emscripten_fetch_attr_init"),M(-1)}function Vt(){q("missing function: emscripten_fetch_close"),M(-1)}function Kt(e){K=!1,mn(e)}function Nn(){return b.length}function zn(e,n){var r=document.pointerLockElement||document.mozPointerLockElement||document.webkitPointerLockElement||document.msPointerLockElement,t=!!r;l[e>>2]=t;var i=S.getNodeNameForTarget(r),a=r&&r.id?r.id:"";de(i,e+4,128),de(a,e+132,128)}function Jt(e){return e&&zn(e),!document.body||!document.body.requestPointerLock&&!document.body.mozRequestPointerLock&&!document.body.webkitRequestPointerLock&&!document.body.msRequestPointerLock?-1:0}function qn(e,n,r){I.set(I.subarray(n,n+r),e)}var In=[0,typeof document<"u"?document:0,typeof window<"u"?window:0];function sn(e){try{return!e||(typeof e=="number"&&(e=In[e]||U(e)),e==="#window")?window:e==="#document"?document:e==="#screen"?screen:e==="#canvas"?f.canvas:typeof e=="string"?document.getElementById(e):e}catch{return null}}function Zt(e,n){if(e||(e="#canvas"),e=sn(e),!e)return-4;if(!e.requestPointerLock&&!e.mozRequestPointerLock&&!e.webkitRequestPointerLock&&!e.msRequestPointerLock)return-1;var r=S.canPerformEventHandlerRequests();return r?un(e):n?(S.deferCall(un,2,[e]),1):-2}function Qt(e){try{return le.grow(e-Pe.byteLength+65535>>16),Sn(le.buffer),1}catch{}}function $t(e){var n=Nn(),r=65536,t=2147483648-r;if(e>t)return!1;for(var i=16777216,a=Math.max(n,i);a<e;)a<=536870912?a=bn(2*a,r):a=Math.min(bn((3*a+2147483648)/4,r),t);var s=Qt(a);return!!s}function eo(e,n,r){if(je[e>>3]=S.tick(),l[e+8>>2]=n.screenX,l[e+12>>2]=n.screenY,l[e+16>>2]=n.clientX,l[e+20>>2]=n.clientY,l[e+24>>2]=n.ctrlKey,l[e+28>>2]=n.shiftKey,l[e+32>>2]=n.altKey,l[e+36>>2]=n.metaKey,G[e+40>>1]=n.button,G[e+42>>1]=n.buttons,l[e+44>>2]=n.movementX||n.mozMovementX||n.webkitMovementX||n.screenX-S.previousScreenX,l[e+48>>2]=n.movementY||n.mozMovementY||n.webkitMovementY||n.screenY-S.previousScreenY,f.canvas){var t=f.canvas.getBoundingClientRect();l[e+60>>2]=n.clientX-t.left,l[e+64>>2]=n.clientY-t.top}else l[e+60>>2]=0,l[e+64>>2]=0;if(r){var t=S.getBoundingClientRectOrZeros(r);l[e+52>>2]=n.clientX-t.left,l[e+56>>2]=n.clientY-t.top}else l[e+52>>2]=0,l[e+56>>2]=0;n.type!=="wheel"&&n.type!=="mousewheel"&&(S.previousScreenX=n.screenX,S.previousScreenY=n.screenY)}function no(e,n,r,t,i,a,s){S.mouseEvent||(S.mouseEvent=Y(72)),e=sn(e);var c=function(v){var h=v||event;eo(S.mouseEvent,h,e),Gn(t,i,S.mouseEvent,n)&&h.preventDefault()},d={target:e,allowsDeferredCalls:a!="mousemove"&&a!="mouseenter"&&a!="mouseleave",eventTypeString:a,callbackfunc:t,handlerFunc:c,useCapture:r};S.isInternetExplorer()&&a=="mousedown"&&(d.allowsDeferredCalls=!1),S.registerOrRemoveHandler(d)}function ro(e,n,r,t,i){return no(e,n,r,t,5,"mousedown"),0}function Xe(e,n,r,t,i,a,s){S.pointerlockChangeEvent||(S.pointerlockChangeEvent=Y(260));var c=function(v){var h=v||event,p=S.pointerlockChangeEvent;zn(p),Gn(t,i,p,n)&&h.preventDefault()},d={target:e,allowsDeferredCalls:!1,eventTypeString:a,callbackfunc:t,handlerFunc:c,useCapture:r};S.registerOrRemoveHandler(d)}function to(e,n,r,t,i){return!document||!document.body||!document.body.requestPointerLock&&!document.body.mozRequestPointerLock&&!document.body.webkitRequestPointerLock&&!document.body.msRequestPointerLock?-1:(e=e?sn(e):In[1],e?(Xe(e,n,r,t,20,"pointerlockchange"),Xe(e,n,r,t,20,"mozpointerlockchange"),Xe(e,n,r,t,20,"webkitpointerlockchange"),Xe(e,n,r,t,20,"mspointerlockchange"),0):-4)}var Un={};function Ne(){if(!Ne.strings){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:qe};for(var n in Un)e[n]=Un[n];var r=[];for(var n in e)r.push(n+"="+e[n]);Ne.strings=r}return Ne.strings}function oo(e,n){var r=Ne(),t=0;return r.forEach(function(i,a){var s=n+t;l[e+a*4>>2]=s,ir(i,s),t+=i.length+1}),0}function io(e,n){var r=Ne();l[e>>2]=r.length;var t=0;return r.forEach(function(i){t+=i.length+1}),l[n>>2]=t,0}function Yn(){return ve(45),-1}function ao(){return Yn.apply(null,arguments)}function uo(){return Yn.apply(null,arguments)}function so(e){mn(e)}function fo(e){try{var n=w.getStreamFromFD(e);return o.close(n),0}catch(r){return(typeof o>"u"||!(r instanceof o.ErrnoError))&&M(r),r.errno}}function co(e,n){try{var r=w.getStreamFromFD(e),t=r.tty?2:o.isDir(r.mode)?3:o.isLink(r.mode)?7:4;return b[n>>0]=t,0}catch(i){return(typeof o>"u"||!(i instanceof o.ErrnoError))&&M(i),i.errno}}function lo(e,n,r,t){try{var i=w.getStreamFromFD(e),a=w.doReadv(i,n,r);return l[t>>2]=a,0}catch(s){return(typeof o>"u"||!(s instanceof o.ErrnoError))&&M(s),s.errno}}function mo(e,n,r,t,i){try{var a=w.getStreamFromFD(e),s=4294967296,c=r*s+(n>>>0),d=9007199254740992;return c<=-d||c>=d?-61:(o.llseek(a,c,t),N=[a.position>>>0,(D=a.position,+oe(D)>=1?D>0?(ue(+ae(D/4294967296),4294967295)|0)>>>0:~~+ie((D-+(~~D>>>0))/4294967296)>>>0:0)],l[i>>2]=N[0],l[i+4>>2]=N[1],a.getdents&&c===0&&t===0&&(a.getdents=null),0)}catch(v){return(typeof o>"u"||!(v instanceof o.ErrnoError))&&M(v),v.errno}}function vo(e,n,r,t){try{var i=w.getStreamFromFD(e),a=w.doWritev(i,n,r);return l[t>>2]=a,0}catch(s){return(typeof o>"u"||!(s instanceof o.ErrnoError))&&M(s),s.errno}}function po(){throw"getpwnam: TODO"}var ho=30095808;de("GMT",30095856,4);function We(){if(We.called)return;We.called=!0,l[Ao()>>2]=new Date().getTimezoneOffset()*60;var e=new Date().getFullYear(),n=new Date(e,0,1),r=new Date(e,6,1);l[Lo()>>2]=+(n.getTimezoneOffset()!=r.getTimezoneOffset());function t(d){var v=d.toTimeString().match(/\(([A-Za-z ]+)\)$/);return v?v[1]:"GMT"}var i=t(n),a=t(r),s=Re(ee(i),"i8",Ce),c=Re(ee(a),"i8",Ce);r.getTimezoneOffset()<n.getTimezoneOffset()?(l[ze()>>2]=s,l[ze()+4>>2]=c):(l[ze()>>2]=c,l[ze()+4>>2]=s)}function go(e,n){We();var r=new Date(l[e>>2]*1e3);l[n>>2]=r.getSeconds(),l[n+4>>2]=r.getMinutes(),l[n+8>>2]=r.getHours(),l[n+12>>2]=r.getDate(),l[n+16>>2]=r.getMonth(),l[n+20>>2]=r.getFullYear()-1900,l[n+24>>2]=r.getDay();var t=new Date(r.getFullYear(),0,1),i=(r.getTime()-t.getTime())/(1e3*60*60*24)|0;l[n+28>>2]=i,l[n+36>>2]=-(r.getTimezoneOffset()*60);var a=new Date(r.getFullYear(),6,1).getTimezoneOffset(),s=t.getTimezoneOffset(),c=(a!=s&&r.getTimezoneOffset()==Math.min(s,a))|0;l[n+32>>2]=c;var d=l[ze()+(c?4:0)>>2];return l[n+40>>2]=d,n}function yo(e){return go(e,ho)}function _o(e,n,r){e=e|0,n=n|0,r=r|0;var t=0,i=0,a=0,s=0;if((r|0)>=8192)return qn(e|0,n|0,r|0)|0,e|0;if(t=e|0,s=e+r|0,(e&3)==(n&3)){for(;e&3;){if(!(r|0))return t|0;b[e>>0]=b[n>>0]|0,e=e+1|0,n=n+1|0,r=r-1|0}for(i=s&-4|0,a=i-64|0;(e|0)<=(a|0);)l[e>>2]=l[n>>2]|0,l[e+4>>2]=l[n+4>>2]|0,l[e+8>>2]=l[n+8>>2]|0,l[e+12>>2]=l[n+12>>2]|0,l[e+16>>2]=l[n+16>>2]|0,l[e+20>>2]=l[n+20>>2]|0,l[e+24>>2]=l[n+24>>2]|0,l[e+28>>2]=l[n+28>>2]|0,l[e+32>>2]=l[n+32>>2]|0,l[e+36>>2]=l[n+36>>2]|0,l[e+40>>2]=l[n+40>>2]|0,l[e+44>>2]=l[n+44>>2]|0,l[e+48>>2]=l[n+48>>2]|0,l[e+52>>2]=l[n+52>>2]|0,l[e+56>>2]=l[n+56>>2]|0,l[e+60>>2]=l[n+60>>2]|0,e=e+64|0,n=n+64|0;for(;(e|0)<(i|0);)l[e>>2]=l[n>>2]|0,e=e+4|0,n=n+4|0}else for(i=s-4|0;(e|0)<(i|0);)b[e>>0]=b[n>>0]|0,b[e+1>>0]=b[n+1>>0]|0,b[e+2>>0]=b[n+2>>0]|0,b[e+3>>0]=b[n+3>>0]|0,e=e+4|0,n=n+4|0;for(;(e|0)<(s|0);)b[e>>0]=b[n>>0]|0,e=e+1|0,n=n+1|0;return t|0}function wo(e,n,r){e=e|0,n=n|0,r=r|0;var t=0,i=0,a=0,s=0;if(t=e+r|0,n=n&255,(r|0)>=67){for(;e&3;)b[e>>0]=n,e=e+1|0;for(i=t&-4|0,s=n|n<<8|n<<16|n<<24,a=i-64|0;(e|0)<=(a|0);)l[e>>2]=s,l[e+4>>2]=s,l[e+8>>2]=s,l[e+12>>2]=s,l[e+16>>2]=s,l[e+20>>2]=s,l[e+24>>2]=s,l[e+28>>2]=s,l[e+32>>2]=s,l[e+36>>2]=s,l[e+40>>2]=s,l[e+44>>2]=s,l[e+48>>2]=s,l[e+52>>2]=s,l[e+56>>2]=s,l[e+60>>2]=s,e=e+64|0;for(;(e|0)<(i|0);)l[e>>2]=s,e=e+4|0}for(;(e|0)<(t|0);)b[e>>0]=n,e=e+1|0;return t-r|0}function Eo(e){We();var n=new Date(l[e+20>>2]+1900,l[e+16>>2],l[e+12>>2],l[e+8>>2],l[e+4>>2],l[e>>2],0),r=l[e+32>>2],t=n.getTimezoneOffset(),i=new Date(n.getFullYear(),0,1),a=new Date(n.getFullYear(),6,1).getTimezoneOffset(),s=i.getTimezoneOffset(),c=Math.min(s,a);if(r<0)l[e+32>>2]=+(a!=s&&c==t);else if(r>0!=(c==t)){var d=Math.max(s,a),v=r>0?c:d;n.setTime(n.getTime()+(v-t)*6e4)}l[e+24>>2]=n.getDay();var h=(n.getTime()-i.getTime())/(1e3*60*60*24)|0;return l[e+28>>2]=h,n.getTime()/1e3|0}function Ve(e){return e%4===0&&(e%100!==0||e%400===0)}function fn(e,n){for(var r=0,t=0;t<=n;r+=e[t++]);return r}var Ke=[31,29,31,30,31,30,31,31,30,31,30,31],Je=[31,28,31,30,31,30,31,31,30,31,30,31];function Ze(e,n){for(var r=new Date(e.getTime());n>0;){var t=Ve(r.getFullYear()),i=r.getMonth(),a=(t?Ke:Je)[i];if(n>a-r.getDate())n-=a-r.getDate()+1,r.setDate(1),i<11?r.setMonth(i+1):(r.setMonth(0),r.setFullYear(r.getFullYear()+1));else return r.setDate(r.getDate()+n),r}return r}function ko(e,n,r,t){var i=l[t+40>>2],a={tm_sec:l[t>>2],tm_min:l[t+4>>2],tm_hour:l[t+8>>2],tm_mday:l[t+12>>2],tm_mon:l[t+16>>2],tm_year:l[t+20>>2],tm_wday:l[t+24>>2],tm_yday:l[t+28>>2],tm_isdst:l[t+32>>2],tm_gmtoff:l[t+36>>2],tm_zone:i?U(i):""},s=U(r),c={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var d in c)s=s.replace(new RegExp(d,"g"),c[d]);var v=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],h=["January","February","March","April","May","June","July","August","September","October","November","December"];function p(y,E,T){for(var F=typeof y=="number"?y.toString():y||"";F.length<E;)F=T[0]+F;return F}function g(y,E){return p(y,E,"0")}function _(y,E){function T(P){return P<0?-1:P>0?1:0}var F;return(F=T(y.getFullYear()-E.getFullYear()))===0&&(F=T(y.getMonth()-E.getMonth()))===0&&(F=T(y.getDate()-E.getDate())),F}function k(y){switch(y.getDay()){case 0:return new Date(y.getFullYear()-1,11,29);case 1:return y;case 2:return new Date(y.getFullYear(),0,3);case 3:return new Date(y.getFullYear(),0,2);case 4:return new Date(y.getFullYear(),0,1);case 5:return new Date(y.getFullYear()-1,11,31);case 6:return new Date(y.getFullYear()-1,11,30)}}function R(y){var E=Ze(new Date(y.tm_year+1900,0,1),y.tm_yday),T=new Date(E.getFullYear(),0,4),F=new Date(E.getFullYear()+1,0,4),P=k(T),j=k(F);return _(P,E)<=0?_(j,E)<=0?E.getFullYear()+1:E.getFullYear():E.getFullYear()-1}var O={"%a":function(y){return v[y.tm_wday].substring(0,3)},"%A":function(y){return v[y.tm_wday]},"%b":function(y){return h[y.tm_mon].substring(0,3)},"%B":function(y){return h[y.tm_mon]},"%C":function(y){var E=y.tm_year+1900;return g(E/100|0,2)},"%d":function(y){return g(y.tm_mday,2)},"%e":function(y){return p(y.tm_mday,2," ")},"%g":function(y){return R(y).toString().substring(2)},"%G":function(y){return R(y)},"%H":function(y){return g(y.tm_hour,2)},"%I":function(y){var E=y.tm_hour;return E==0?E=12:E>12&&(E-=12),g(E,2)},"%j":function(y){return g(y.tm_mday+fn(Ve(y.tm_year+1900)?Ke:Je,y.tm_mon-1),3)},"%m":function(y){return g(y.tm_mon+1,2)},"%M":function(y){return g(y.tm_min,2)},"%n":function(){return`
`},"%p":function(y){return y.tm_hour>=0&&y.tm_hour<12?"AM":"PM"},"%S":function(y){return g(y.tm_sec,2)},"%t":function(){return"	"},"%u":function(y){return y.tm_wday||7},"%U":function(y){var E=new Date(y.tm_year+1900,0,1),T=E.getDay()===0?E:Ze(E,7-E.getDay()),F=new Date(y.tm_year+1900,y.tm_mon,y.tm_mday);if(_(T,F)<0){var P=fn(Ve(F.getFullYear())?Ke:Je,F.getMonth()-1)-31,j=31-T.getDate(),J=j+P+F.getDate();return g(Math.ceil(J/7),2)}return _(T,E)===0?"01":"00"},"%V":function(y){var E=new Date(y.tm_year+1900,0,4),T=new Date(y.tm_year+1901,0,4),F=k(E),P=k(T),j=Ze(new Date(y.tm_year+1900,0,1),y.tm_yday);if(_(j,F)<0)return"53";if(_(P,j)<=0)return"01";var J;return F.getFullYear()<y.tm_year+1900?J=y.tm_yday+32-F.getDate():J=y.tm_yday+1-F.getDate(),g(Math.ceil(J/7),2)},"%w":function(y){return y.tm_wday},"%W":function(y){var E=new Date(y.tm_year,0,1),T=E.getDay()===1?E:Ze(E,E.getDay()===0?1:7-E.getDay()+1),F=new Date(y.tm_year+1900,y.tm_mon,y.tm_mday);if(_(T,F)<0){var P=fn(Ve(F.getFullYear())?Ke:Je,F.getMonth()-1)-31,j=31-T.getDate(),J=j+P+F.getDate();return g(Math.ceil(J/7),2)}return _(T,E)===0?"01":"00"},"%y":function(y){return(y.tm_year+1900).toString().substring(2)},"%Y":function(y){return y.tm_year+1900},"%z":function(y){var E=y.tm_gmtoff,T=E>=0;return E=Math.abs(E)/60,E=E/60*100+E%60,(T?"+":"-")+("0000"+E).slice(-4)},"%Z":function(y){return y.tm_zone},"%%":function(){return"%"}};for(var d in O)s.indexOf(d)>=0&&(s=s.replace(new RegExp(d,"g"),O[d](a)));var B=ee(s,!1);return B.length>n?0:(or(B,e),B.length-1)}function bo(e,n,r,t){return ko(e,n,r,t)}function So(e){var n=Date.now()/1e3|0;return e&&(l[e>>2]=n),n}function Qe(e){try{return e()}catch(n){M(n)}}var A={State:{Normal:0,Unwinding:1,Rewinding:2},state:0,StackSize:4096,currData:null,dataInfo:{},handleSleepReturnValue:0,exportCallStack:[],afterUnwind:null,asyncFinalizers:[],instrumentWasmExports:function(e){var n={};for(var r in e)(function(t){var i=e[t];typeof i=="function"?n[t]=function(){A.exportCallStack.push(t);try{return i.apply(null,arguments)}finally{if(X)return;var a=A.exportCallStack.pop(t);H(a===t),A.currData&&A.state===A.State.Unwinding&&A.exportCallStack.length===0&&(A.state=A.State.Normal,Qe(f._asyncify_stop_unwind))}}:n[t]=i})(r);return n},allocateData:function(){var e=Y(A.StackSize+8);l[e>>2]=e+8,l[e+4>>2]=e+8+A.StackSize;var n=A.exportCallStack[0];return A.dataInfo[e]={bottomOfCallStack:n},e},freeData:function(e){fe(e),A.dataInfo[e]=null},handleSleep:function(e){if(!X){if(K=!0,A.state===A.State.Normal){var n=!1,r=!1;e(function(t){if(!X&&(A.handleSleepReturnValue=t||0,n=!0,!!r)){A.state=A.State.Rewinding,Qe(function(){f._asyncify_start_rewind(A.currData)}),m.mainLoop.func&&m.mainLoop.resume();var i=A.dataInfo[A.currData].bottomOfCallStack,a=f.asm[i]();if(!A.currData){var s=A.asyncFinalizers;A.asyncFinalizers=[],s.forEach(function(c){c(a)})}}}),r=!0,n||(A.state=A.State.Unwinding,A.currData=A.allocateData(),Qe(function(){f._asyncify_start_unwind(A.currData)}),m.mainLoop.func&&m.mainLoop.pause())}else A.state===A.State.Rewinding?(A.state=A.State.Normal,Qe(f._asyncify_stop_rewind),A.freeData(A.currData),A.currData=null):M("invalid state: "+A.state);return A.handleSleepReturnValue}}};o.staticInit(),f.FS_createFolder=o.createFolder,f.FS_createPath=o.createPath,f.FS_createDataFile=o.createDataFile,f.FS_createPreloadedFile=o.createPreloadedFile,f.FS_createLazyFile=o.createLazyFile,f.FS_createLink=o.createLink,f.FS_createDevice=o.createDevice,f.FS_unlink=o.unlink,f.requestFullscreen=function(n,r,t){m.requestFullscreen(n,r,t)},f.requestAnimationFrame=function(n){m.requestAnimationFrame(n)},f.setCanvasSize=function(n,r,t){m.setCanvasSize(n,r,t)},f.pauseMainLoop=function(){m.mainLoop.pause()},f.resumeMainLoop=function(){m.mainLoop.resume()},f.getUserMedia=function(){m.getUserMedia()},f.createContext=function(n,r,t,i){return m.createContext(n,r,t,i)},ce?he=function(){var n=Z.hrtime();return n[0]*1e3+n[1]/1e6}:typeof dateNow<"u"?he=dateNow:typeof performance=="object"&&performance&&typeof performance.now=="function"?he=function(){return performance.now()}:he=Date.now;var ge;x.init();function ee(e,n,r){var t=r>0?r:Ee(e)+1,i=new Array(t),a=Ye(e,i,0,i.length);return n&&(i.length=a),i}var jn={Sa:Lr,V:Ar,U:Fr,k:Mr,i:Tr,C:Cr,h:Rr,Ra:Pr,B:Or,b:Pn,Qa:Br,Pa:Nr,T:zr,A:qr,z:Ir,Oa:Ur,Na:Yr,Ma:jr,S:Hr,s:Gr,r:Xr,La:Wr,q:Vr,Ka:Kr,y:Jr,R:On,j:Zr,Q:Qr,Ja:$r,Ia:Bn,p:et,P:rt,O:tt,x:it,Ha:at,g:ut,w:st,N:ft,v:ct,Ga:lt,u:dt,Fa:mt,Ea:vt,M:pt,e:ht,d:gt,L:yt,Da:_t,K:wt,Ca:Et,Ba:kt,Aa:bt,J:St,za:Dt,ya:At,xa:xt,I:Ft,wa:Mt,va:Tt,ua:Ct,ta:Rt,H:Pt,G:Ot,sa:Bt,ra:Nt,qa:qt,n:It,t:Ut,ka:jt,a:Er,F:Ht,ja:Gt,ia:Xt,ha:Wt,ga:Vt,E:Kt,fa:Jt,ea:qn,da:Zt,ca:$t,ba:Rn,aa:ro,$:to,pa:oo,oa:io,D:ao,_:uo,c:so,o:fo,na:co,ma:lo,Y:mo,la:vo,Z:po,f:yo,memory:le,X:Eo,W:bo,m:kr,table:er,l:So},Hn=gr();f.asm=Hn;var Do=f.___wasm_call_ctors=function(){return f.asm.Ta.apply(null,arguments)};f._safe_create_dir=function(){return f.asm.Ua.apply(null,arguments)},f.___errno_location=function(){return f.asm.Va.apply(null,arguments)},f._extract_zip=function(){return f.asm.Wa.apply(null,arguments)};var fe=f._free=function(){return f.asm.Xa.apply(null,arguments)},Y=f._malloc=function(){return f.asm.Ya.apply(null,arguments)};f.__send=function(){return f.asm.Za.apply(null,arguments)},f._main=function(){return f.asm._a.apply(null,arguments)};var ze=f.__get_tzname=function(){return f.asm.$a.apply(null,arguments)},Lo=f.__get_daylight=function(){return f.asm.ab.apply(null,arguments)},Ao=f.__get_timezone=function(){return f.asm.bb.apply(null,arguments)},cn=f.__ZSt18uncaught_exceptionv=function(){return f.asm.cb.apply(null,arguments)},ln=f.stackAlloc=function(){return f.asm.db.apply(null,arguments)};f.dynCall_vi=function(){return f.asm.eb.apply(null,arguments)},f.dynCall_v=function(){return f.asm.fb.apply(null,arguments)},f.dynCall_iii=function(){return f.asm.gb.apply(null,arguments)};var xo=f.dynCall_viii=function(){return f.asm.hb.apply(null,arguments)},Gn=f.dynCall_iiii=function(){return f.asm.ib.apply(null,arguments)};f._asyncify_start_unwind=function(){return f.asm.jb.apply(null,arguments)},f._asyncify_stop_unwind=function(){return f.asm.kb.apply(null,arguments)},f._asyncify_start_rewind=function(){return f.asm.lb.apply(null,arguments)},f._asyncify_stop_rewind=function(){return f.asm.mb.apply(null,arguments)},f.asm=Hn,f.getMemory=rr,f.UTF8ToString=U,f.stringToUTF8=de,f.lengthBytesUTF8=Ee,f.UTF16ToString=tr,f.addRunDependency=Ge,f.removeRunDependency=Be,f.FS=o,f.FS_createFolder=o.createFolder,f.FS_createPath=o.createPath,f.FS_createDataFile=o.createDataFile,f.FS_createPreloadedFile=o.createPreloadedFile,f.FS_createLazyFile=o.createLazyFile,f.FS_createLink=o.createLink,f.FS_createDevice=o.createDevice,f.FS_unlink=o.unlink,f.callMain=Xn,f.calledRun=be;var be;f.then=function(e){if(be)e(f);else{var n=f.onRuntimeInitialized;f.onRuntimeInitialized=function(){n&&n(),e(f)}}return f};function $e(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}Oe=function e(){be||dn(),be||(Oe=e)};function Xn(e){var n=f._main;e=e||[];var r=e.length+1,t=ln((r+1)*4);l[t>>2]=kn(qe);for(var i=1;i<r;i++)l[(t>>2)+i]=kn(e[i-1]);l[(t>>2)+r]=0;try{var a=n(r,t);K||mn(a,!0)}catch(c){if(c instanceof $e)return;if(c=="SimulateInfiniteLoop"){K=!0;return}else{var s=c;c&&typeof c=="object"&&c.stack&&(s=[c,c.stack]),q("exception thrown: "+s),xe(1,c)}}finally{}}function dn(e){if(e=e||Ae,me>0||(cr(),me>0))return;function n(){be||(be=!0,f.calledRun=!0,!X&&(lr(),dr(),f.onRuntimeInitialized&&f.onRuntimeInitialized(),Wn&&Xn(e),mr()))}f.setStatus?(f.setStatus("Running..."),setTimeout(function(){setTimeout(function(){f.setStatus("")},1),n()},1)):n()}f.run=dn;function mn(e,n){n&&K&&e===0||(K||(X=!0,f.onExit&&f.onExit(e)),xe(e,new $e(e)))}if(f.preInit)for(typeof f.preInit=="function"&&(f.preInit=[f.preInit]);f.preInit.length>0;)f.preInit.pop()();var Wn=!1;return f.noInitialRun&&(Wn=!1),K=!0,dn(),W}}();Se.exports=De})(Vn);var Kn=Vn.exports;const zo=To(Kn),Yo=Po({__proto__:null,default:zo},[Kn]);export{Yo as w};
